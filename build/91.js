webpackJsonp([91],{1867:function(n,l,u){"use strict";function o(n){return j._42(0,[(n()(),j._16(0,0,null,null,5,"ion-note",[["float-end",""],["padding-left",""]],null,null,null,null,null)),j._15(1,16384,null,0,En.a,[pn.a,j.p,j.K],null,null),(n()(),j._16(2,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),j._15(3,147456,null,0,Wn.a,[pn.a,j.p,j.K],{name:[0,"name"]},null),(n()(),j._40(4,null,[" ",""])),j._32(131072,jn.a,[vn.a,j.i])],function(n,l){n(l,3,0,"time")},function(n,l){n(l,2,0,j._29(l,3)._hidden);n(l,4,0,j._41(l,4,0,j._29(l,5).transform("core.notsent")))})}function t(n){return j._42(0,[(n()(),j._16(0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),j._16(1,0,null,null,1,"core-icon",[["color","primary"],["name","fa-circle"]],null,null,null,An.b,An.a)),j._15(2,245760,null,0,Un.a,[j.p],{name:[0,"name"],color:[1,"color"]},null),(n()(),j._40(3,null,[" ",""])),j._32(131072,jn.a,[vn.a,j.i])],function(n,l){n(l,2,0,"fa-circle","primary")},function(n,l){n(l,3,0,j._41(l,3,0,j._29(l,4).transform("addon.mod_forum.unread")))})}function e(n){return j._42(0,[(n()(),j._16(0,0,null,null,6,"ion-note",[["float-end",""],["padding-left",""],["text-end",""]],null,null,null,null,null)),j._15(1,16384,null,0,En.a,[pn.a,j.p,j.K],null,null),(n()(),j._40(2,null,["\n                ","\n                "])),j._34(3,1),(n()(),j._11(16777216,null,null,1,null,t)),j._15(5,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,null,["\n            "]))],function(n,l){var u=l.component;n(l,5,0,u.trackPosts&&!u.post.postread)},function(n,l){var u=l.component;n(l,2,0,j._41(l,2,0,n(l,3,0,j._29(l.parent,0),u.post.modified)))})}function a(n){return j._42(0,[(n()(),j._16(0,0,null,null,1,"core-file",[],null,null,null,Rn.b,Rn.a)),j._15(1,245760,null,0,Fn.a,[N.a,$.a,V.a,Cn.a,R.a,Nn.a,Vn.a,F.a,bn.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(n,l){var u=l.component;n(l,1,0,l.parent.context.$implicit,u.component,u.componentId)},null)}function i(n){return j._42(0,[(n()(),j._16(0,0,null,null,1,"core-local-file",[],null,null,null,$n.b,$n.a)),j._15(1,114688,null,0,Hn.a,[Vn.a,$.a,vn.a,bn.a,qn.a,V.a],{file:[0,"file"]},null)],function(n,l){n(l,1,0,l.parent.context.$implicit)},null)}function r(n){return j._42(0,[(n()(),j._16(0,0,null,null,9,null,null,null,null,null,null,null)),(n()(),j._40(-1,null,["\n            "])),(n()(),j._40(-1,null,["\n            "])),(n()(),j._11(16777216,null,null,1,null,a)),j._15(4,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,null,["\n            "])),(n()(),j._40(-1,null,["\n            "])),(n()(),j._11(16777216,null,null,1,null,i)),j._15(8,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,null,["\n        "]))],function(n,l){n(l,4,0,!l.context.$implicit.name);n(l,8,0,l.context.$implicit.name)},null)}function s(n){return j._42(0,[(n()(),j._16(0,0,null,null,14,"ion-item",[["class","addon-forum-reply-button item item-block"],["no-padding",""],["text-end",""]],null,null,null,Yn.b,Yn.a)),j._15(1,1097728,null,3,zn.a,[Bn.a,pn.a,j.p,j.K,[2,Jn.a]],null,null),j._37(335544320,4,{contentLabel:0}),j._37(603979776,5,{_buttons:1}),j._37(603979776,6,{_icons:1}),j._15(5,16384,null,0,Gn.a,[],null,null),(n()(),j._40(-1,2,["\n    "])),(n()(),j._16(7,0,null,2,6,"button",[["clear",""],["icon-left",""],["ion-button",""],["small",""]],[[1,"aria-controls",0],[1,"aria-expanded",0]],[[null,"click"]],function(n,l,u){var o=!0;if("click"===l){o=!1!==n.component.showReply()&&o}return o},Qn.b,Qn.a)),j._15(8,1097728,[[5,4]],0,Xn.a,[[8,""],pn.a,j.p,j.K],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),j._40(-1,0,["\n        "])),(n()(),j._16(10,0,null,0,1,"ion-icon",[["name","undo"],["role","img"]],[[2,"hide",null]],null,null,null,null)),j._15(11,147456,null,0,Wn.a,[pn.a,j.p,j.K],{name:[0,"name"]},null),(n()(),j._40(12,0,[" ","\n    "])),j._32(131072,jn.a,[vn.a,j.i]),(n()(),j._40(-1,2,["\n"]))],function(n,l){n(l,8,0,"","");n(l,11,0,"undo")},function(n,l){var u=l.component;n(l,7,0,"addon-forum-reply-edit-form-"+u.uniqueId,u.replyData.replyingTo===u.post.id);n(l,10,0,j._29(l,11)._hidden);n(l,12,0,j._41(l,12,0,j._29(l,13).transform("addon.mod_forum.reply")))})}function c(n){return j._42(0,[(n()(),j._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-end",""]],null,null,null,Yn.b,Yn.a)),j._15(1,1097728,null,3,zn.a,[Bn.a,pn.a,j.p,j.K,[2,Jn.a]],null,null),j._37(335544320,7,{contentLabel:0}),j._37(603979776,8,{_buttons:1}),j._37(603979776,9,{_icons:1}),j._15(5,16384,null,0,Gn.a,[],null,null),(n()(),j._40(-1,2,["\n    "])),(n()(),j._16(7,0,null,2,6,"button",[["clear",""],["icon-left",""],["ion-button",""],["small",""]],[[1,"aria-controls",0],[1,"aria-expanded",0]],[[null,"click"]],function(n,l,u){var o=!0;if("click"===l){o=!1!==n.component.editReply()&&o}return o},Qn.b,Qn.a)),j._15(8,1097728,[[8,4]],0,Xn.a,[[8,""],pn.a,j.p,j.K],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),j._40(-1,0,["\n        "])),(n()(),j._16(10,0,null,0,1,"ion-icon",[["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),j._15(11,147456,null,0,Wn.a,[pn.a,j.p,j.K],{name:[0,"name"]},null),(n()(),j._40(12,0,[" ","\n    "])),j._32(131072,jn.a,[vn.a,j.i]),(n()(),j._40(-1,2,["\n"]))],function(n,l){n(l,8,0,"","");n(l,11,0,"create")},function(n,l){var u=l.component;n(l,7,0,"addon-forum-reply-edit-form-"+u.uniqueId,u.replyData.replyingTo===u.post.parent);n(l,10,0,j._29(l,11)._hidden);n(l,12,0,j._41(l,12,0,j._29(l,13).transform("addon.mod_forum.edit")))})}function _(n){return j._42(0,[(n()(),j._16(0,0,null,null,1,"core-attachments",[],null,null,null,Zn.b,Zn.a)),j._15(1,114688,null,0,nl.a,[R.a,V.a,bn.a,H.a,vn.a,ll.a],{files:[0,"files"],maxSize:[1,"maxSize"],maxSubmissions:[2,"maxSubmissions"],component:[3,"component"],componentId:[4,"componentId"],allowOffline:[5,"allowOffline"]},null)],function(n,l){var u=l.component;n(l,1,0,u.replyData.files,u.forum.maxbytes,u.forum.maxattachments,u.component,u.forum.cmid,!0)},null)}function d(n){return j._42(0,[(n()(),j._16(0,0,null,null,11,"ion-row",[["class","row"]],null,null,null,null,null)),j._15(1,16384,null,0,ul.a,[],null,null),(n()(),j._40(-1,null,["\n            "])),(n()(),j._16(3,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),j._15(4,16384,null,0,ol.a,[],null,null),(n()(),j._40(-1,null,["\n                "])),(n()(),j._16(6,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(n,l,u){var o=!0;if("click"===l){o=!1!==n.component.discard()&&o}return o},Qn.b,Qn.a)),j._15(7,1097728,null,0,Xn.a,[[8,""],pn.a,j.p,j.K],{color:[0,"color"],block:[1,"block"]},null),(n()(),j._40(8,0,["",""])),j._32(131072,jn.a,[vn.a,j.i]),(n()(),j._40(-1,null,["\n            "])),(n()(),j._40(-1,null,["\n        "]))],function(n,l){n(l,7,0,"light","")},function(n,l){n(l,8,0,j._41(l,8,0,j._29(l,9).transform("core.discard")))})}function f(n){return j._42(0,[(n()(),j._16(0,0,null,null,71,"ion-list",[],[[8,"id",0]],null,null,null,null)),j._15(1,16384,null,0,tl.a,[pn.a,j.p,j.K,yn.a,el.l,al.a],null,null),(n()(),j._40(-1,null,["\n    "])),(n()(),j._16(3,0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,Yn.b,Yn.a)),j._15(4,1097728,null,3,zn.a,[Bn.a,pn.a,j.p,j.K,[2,Jn.a]],null,null),j._37(335544320,10,{contentLabel:0}),j._37(603979776,11,{_buttons:1}),j._37(603979776,12,{_icons:1}),j._15(8,16384,null,0,Gn.a,[],null,null),(n()(),j._40(-1,2,["\n        "])),(n()(),j._16(10,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,null,null)),j._15(11,16384,[[10,4]],0,il.a,[pn.a,j.p,j.K,[8,null],[8,""],[8,null],[8,null]],null,null),(n()(),j._40(12,null,["",""])),j._32(131072,jn.a,[vn.a,j.i]),(n()(),j._40(-1,2,["\n        "])),(n()(),j._16(15,0,null,3,5,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,u){var o=!0;if("ngModelChange"===l){o=!1!==(n.component.replyData.subject=u)&&o}return o},rl.b,rl.a)),j._15(16,671744,null,0,sl.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),j._35(2048,null,sl.m,null,[sl.q]),j._15(18,16384,null,0,sl.n,[sl.m],null,null),j._15(19,5423104,null,0,cl.a,[pn.a,yn.a,Bn.a,_l.a,j.p,j.K,[2,xn.a],[2,zn.a],[2,sl.m],al.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),j._32(131072,jn.a,[vn.a,j.i]),(n()(),j._40(-1,2,["\n    "])),(n()(),j._40(-1,null,["\n    "])),(n()(),j._16(23,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,Yn.b,Yn.a)),j._15(24,1097728,null,3,zn.a,[Bn.a,pn.a,j.p,j.K,[2,Jn.a]],null,null),j._37(335544320,13,{contentLabel:0}),j._37(603979776,14,{_buttons:1}),j._37(603979776,15,{_icons:1}),j._15(28,16384,null,0,Gn.a,[],null,null),(n()(),j._40(-1,2,["\n        "])),(n()(),j._16(30,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,null,null)),j._15(31,16384,[[13,4]],0,il.a,[pn.a,j.p,j.K,[8,null],[8,""],[8,null],[8,null]],null,null),(n()(),j._40(32,null,["",""])),j._32(131072,jn.a,[vn.a,j.i]),(n()(),j._40(-1,2,["\n        "])),(n()(),j._16(35,0,null,3,2,"core-rich-text-editor",[["item-content",""]],null,[[null,"contentChanged"]],function(n,l,u){var o=!0;if("contentChanged"===l){o=!1!==n.component.onMessageChange(u)&&o}return o},dl.b,dl.a)),j._15(36,1228800,null,0,fl.a,[V.a,Pn.a,N.a,Cn.a,[2,xn.a],j.p,F.a,$.a,yn.a],{placeholder:[0,"placeholder"],control:[1,"control"],name:[2,"name"],component:[3,"component"],componentId:[4,"componentId"]},{contentChanged:"contentChanged"}),j._32(131072,jn.a,[vn.a,j.i]),(n()(),j._40(-1,2,["\n    "])),(n()(),j._40(-1,null,["\n    "])),(n()(),j._11(16777216,null,null,1,null,_)),j._15(41,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,null,["\n    "])),(n()(),j._16(43,0,null,null,27,"ion-grid",[["class","grid"]],null,null,null,null,null)),j._15(44,16384,null,0,ml.a,[],null,null),(n()(),j._40(-1,null,["\n        "])),(n()(),j._16(46,0,null,null,20,"ion-row",[["class","row"]],null,null,null,null,null)),j._15(47,16384,null,0,ul.a,[],null,null),(n()(),j._40(-1,null,["\n            "])),(n()(),j._16(49,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),j._15(50,16384,null,0,ol.a,[],null,null),(n()(),j._40(-1,null,["\n                "])),(n()(),j._16(52,0,null,null,3,"button",[["block",""],["ion-button",""]],[[8,"disabled",0]],[[null,"click"]],function(n,l,u){var o=!0;if("click"===l){o=!1!==n.component.reply()&&o}return o},Qn.b,Qn.a)),j._15(53,1097728,null,0,Xn.a,[[8,""],pn.a,j.p,j.K],{block:[0,"block"]},null),(n()(),j._40(54,0,["",""])),j._32(131072,jn.a,[vn.a,j.i]),(n()(),j._40(-1,null,["\n            "])),(n()(),j._40(-1,null,["\n            "])),(n()(),j._16(58,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),j._15(59,16384,null,0,ol.a,[],null,null),(n()(),j._40(-1,null,["\n                "])),(n()(),j._16(61,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(n,l,u){var o=!0;if("click"===l){o=!1!==n.component.cancel()&&o}return o},Qn.b,Qn.a)),j._15(62,1097728,null,0,Xn.a,[[8,""],pn.a,j.p,j.K],{color:[0,"color"],block:[1,"block"]},null),(n()(),j._40(63,0,["",""])),j._32(131072,jn.a,[vn.a,j.i]),(n()(),j._40(-1,null,["\n            "])),(n()(),j._40(-1,null,["\n        "])),(n()(),j._40(-1,null,["\n        "])),(n()(),j._11(16777216,null,null,1,null,d)),j._15(69,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,null,["\n    "])),(n()(),j._40(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,16,0,u.replyData.subject);n(l,19,0,"text",j._41(l,19,1,j._29(l,20).transform("addon.mod_forum.subject")));n(l,36,0,j._41(l,36,0,j._29(l,37).transform("addon.mod_forum.message")),u.messageControl,"mod_forum_reply_"+u.post.id,u.component,u.componentId);n(l,41,0,u.forum.id&&u.forum.maxattachments>0);n(l,53,0,"");n(l,62,0,"light","");n(l,69,0,u.replyData.isEditing)},function(n,l){var u=l.component;n(l,0,0,"addon-forum-reply-edit-form-"+u.uniqueId);n(l,12,0,j._41(l,12,0,j._29(l,13).transform("addon.mod_forum.subject")));n(l,15,0,j._29(l,18).ngClassUntouched,j._29(l,18).ngClassTouched,j._29(l,18).ngClassPristine,j._29(l,18).ngClassDirty,j._29(l,18).ngClassValid,j._29(l,18).ngClassInvalid,j._29(l,18).ngClassPending);n(l,32,0,j._41(l,32,0,j._29(l,33).transform("addon.mod_forum.message")));n(l,52,0,""==u.replyData.subject||null==u.replyData.message);n(l,54,0,j._41(l,54,0,j._29(l,55).transform("addon.mod_forum.posttoforum")));n(l,63,0,j._41(l,63,0,j._29(l,64).transform("core.cancel")))})}function m(n){return j._42(0,[j._32(0,pl.a,[kn.a,vn.a]),(n()(),j._16(1,0,null,null,28,"ion-card-header",[["no-padding",""],["text-wrap",""]],null,null,null,null,null)),j._15(2,16384,null,0,hl.a,[pn.a,j.p,j.K],null,null),(n()(),j._40(-1,null,["\n    "])),(n()(),j._16(4,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,Yn.b,Yn.a)),j._15(5,1097728,null,3,zn.a,[Bn.a,pn.a,j.p,j.K,[2,Jn.a]],null,null),j._37(335544320,1,{contentLabel:0}),j._37(603979776,2,{_buttons:1}),j._37(603979776,3,{_icons:1}),j._15(9,16384,null,0,Gn.a,[],null,null),(n()(),j._40(-1,2,["\n        "])),(n()(),j._16(11,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,[[null,"click"]],function(n,l,u){var o=!0,t=n.component;if("click"===l){o=!1!==t.openUserProfile(t.post.userid)&&o}return o},gl.b,gl.a)),j._15(12,16384,null,0,Il.a,[],null,null),j._15(13,638976,null,0,bl.a,[On.a,N.a,$.a],{user:[0,"user"]},null),(n()(),j._40(-1,2,["\n        "])),(n()(),j._16(15,0,null,2,3,"h2",[],null,null,null,null,null)),(n()(),j._16(16,0,null,null,2,"span",[],[[2,"core-bold",null]],null,null,null,null)),(n()(),j._16(17,0,null,null,1,"core-format-text",[],null,null,null,null,null)),j._15(18,540672,null,0,In.a,[j.p,N.a,V.a,bn.a,vn.a,yn.a,$.a,Pn.a,kn.a,Cn.a,R.a,Dn.a,[2,On.a],[2,xn.a],[2,q.a],Tn.a,F.a],{text:[0,"text"]},null),(n()(),j._40(-1,2,["\n        "])),(n()(),j._16(20,0,null,2,7,"p",[],null,null,null,null,null)),(n()(),j._40(-1,null,["\n            "])),(n()(),j._11(16777216,null,null,1,null,o)),j._15(23,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,null,["\n            "])),(n()(),j._11(16777216,null,null,1,null,e)),j._15(26,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(27,null,["\n            ","\n        "])),(n()(),j._40(-1,2,["\n    "])),(n()(),j._40(-1,null,["\n"])),(n()(),j._40(-1,null,["\n"])),(n()(),j._16(31,0,null,null,11,"ion-card-content",[["padding-top",""]],null,null,null,null,null)),j._15(32,16384,null,0,vl.a,[pn.a,j.p,j.K],null,null),(n()(),j._40(-1,null,["\n    "])),(n()(),j._16(34,0,null,null,1,"core-format-text",[],null,null,null,null,null)),j._15(35,540672,null,0,In.a,[j.p,N.a,V.a,bn.a,vn.a,yn.a,$.a,Pn.a,kn.a,Cn.a,R.a,Dn.a,[2,On.a],[2,xn.a],[2,q.a],Tn.a,F.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(n()(),j._40(-1,null,["\n    "])),(n()(),j._16(37,0,null,null,4,"div",[["no-lines",""]],null,null,null,null,null)),(n()(),j._40(-1,null,["\n        "])),(n()(),j._11(16777216,null,null,1,null,r)),j._15(40,802816,null,0,Mn.j,[j.W,j.T,j.v],{ngForOf:[0,"ngForOf"]},null),(n()(),j._40(-1,null,["\n    "])),(n()(),j._40(-1,null,["\n"])),(n()(),j._40(-1,null,["\n"])),(n()(),j._11(16777216,null,null,1,null,s)),j._15(45,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,null,["\n"])),(n()(),j._11(16777216,null,null,1,null,c)),j._15(48,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,null,["\n"])),(n()(),j._11(16777216,null,null,1,null,f)),j._15(51,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,13,0,u.post);n(l,18,0,u.post.subject);n(l,23,0,!u.post.modified);n(l,26,0,u.post.modified);n(l,35,0,u.post.message,u.component,u.componentId);n(l,40,0,u.post.attachments);n(l,45,0,u.post.id&&u.post.canreply);n(l,48,0,!(u.post.id||u.replyData.isEditing&&u.replyData.replyingTo==u.post.parent));n(l,51,0,u.post.id&&!u.replyData.isEditing&&u.replyData.replyingTo==u.post.id||!u.post.id&&u.replyData.isEditing&&u.replyData.replyingTo==u.post.parent)},function(n,l){var u=l.component;n(l,16,0,0==u.post.parent);n(l,27,0,u.post.userfullname)})}function p(n){return j._42(0,[(n()(),j._16(0,0,null,null,3,"ion-title",[],null,null,null,fn.b,fn.a)),j._15(1,49152,null,0,mn.a,[pn.a,j.p,j.K,[2,hn.a],[2,gn.a]],null,null),(n()(),j._16(2,0,null,0,1,"core-format-text",[],null,null,null,null,null)),j._15(3,540672,null,0,In.a,[j.p,N.a,V.a,bn.a,vn.a,yn.a,$.a,Pn.a,kn.a,Cn.a,R.a,Dn.a,[2,On.a],[2,xn.a],[2,q.a],Tn.a,F.a],{text:[0,"text"]},null)],function(n,l){n(l,3,0,l.component.discussion.subject)},null)}function h(n){return j._42(0,[(n()(),j._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.doRefresh(null,u)&&o}return o},Sn.b,Sn.a)),j._15(1,770048,null,0,wn.a,[Kn.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),j._32(131072,jn.a,[vn.a,j.i])],function(n,l){var u=l.component;n(l,1,0,j._41(l,1,0,j._29(l,2).transform("addon.mod_forum.refreshposts")),u.refreshIcon,!1,650)},null)}function g(n){return j._42(0,[(n()(),j._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.doRefresh(null,u,!0)&&o}return o},Sn.b,Sn.a)),j._15(1,770048,null,0,wn.a,[Kn.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),j._32(131072,jn.a,[vn.a,j.i])],function(n,l){var u=l.component;n(l,1,0,j._41(l,1,0,j._29(l,2).transform("core.settings.synchronizenow")),u.syncIcon,!1,550)},null)}function I(n){return j._42(0,[(n()(),j._16(0,0,null,null,7,"ion-card",[["class","core-warning-card"]],null,null,null,null,null)),j._15(1,16384,null,0,Ln.a,[pn.a,j.p,j.K],null,null),(n()(),j._40(-1,null,["\n            "])),(n()(),j._16(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),j._15(4,147456,null,0,Wn.a,[pn.a,j.p,j.K],{name:[0,"name"]},null),(n()(),j._40(5,null,[" ","\n        "])),j._33(6,{$a:0}),j._32(131072,jn.a,[vn.a,j.i])],function(n,l){n(l,4,0,"warning")},function(n,l){var u=l.component;n(l,3,0,j._29(l,4)._hidden);n(l,5,0,j._41(l,5,0,j._29(l,7).transform("core.hasdatatosync",n(l,6,0,u.discussionStr))))})}function b(n){return j._42(0,[(n()(),j._16(0,0,null,null,6,"ion-card",[["class","core-warning-card"]],null,null,null,null,null)),j._15(1,16384,null,0,Ln.a,[pn.a,j.p,j.K],null,null),(n()(),j._40(-1,null,["\n            "])),(n()(),j._16(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),j._15(4,147456,null,0,Wn.a,[pn.a,j.p,j.K],{name:[0,"name"]},null),(n()(),j._40(5,null,[" ","\n        "])),j._32(131072,jn.a,[vn.a,j.i])],function(n,l){n(l,4,0,"warning")},function(n,l){n(l,3,0,j._29(l,4)._hidden);n(l,5,0,j._41(l,5,0,j._29(l,6).transform("addon.mod_forum.discussionlocked")))})}function v(n){return j._42(0,[(n()(),j._16(0,0,null,null,5,"ion-card",[["class","highlight"],["margin-bottom",""]],null,null,null,null,null)),j._15(1,16384,null,0,Ln.a,[pn.a,j.p,j.K],null,null),(n()(),j._40(-1,null,["\n            "])),(n()(),j._16(3,0,null,null,1,"addon-mod-forum-post",[],null,[[null,"onPostChange"]],function(n,l,u){var o=!0;if("onPostChange"===l){o=!1!==n.component.postListChanged()&&o}return o},m,kl)),j._15(4,245760,null,0,yl.a,[On.a,H.a,Pl.a,V.a,bn.a,vn.a,Y.a,B.a,z.a,J.a,[2,q.a]],{post:[0,"post"],courseId:[1,"courseId"],discussionId:[2,"discussionId"],component:[3,"component"],componentId:[4,"componentId"],replyData:[5,"replyData"],originalData:[6,"originalData"],trackPosts:[7,"trackPosts"],forum:[8,"forum"],defaultSubject:[9,"defaultSubject"]},{onPostChange:"onPostChange"}),(n()(),j._40(-1,null,["\n        "]))],function(n,l){var u=l.component;n(l,4,0,u.discussion,u.courseId,u.discussionId,u.component,u.cmId,u.replyData,u.originalData,u.trackPosts,u.forum,u.defaultSubject)},null)}function y(n){return j._42(0,[(n()(),j._16(0,0,null,null,5,"ion-item-divider",[["class","item item-divider"],["color","light"]],null,null,null,Yn.b,Yn.a)),j._15(1,1097728,null,3,zn.a,[Bn.a,pn.a,j.p,j.K,[2,Jn.a]],{color:[0,"color"]},null),j._37(335544320,4,{contentLabel:0}),j._37(603979776,5,{_buttons:1}),j._37(603979776,6,{_icons:1}),j._15(5,16384,null,0,Cl.a,[pn.a,j.p,j.K],{color:[0,"color"]},null)],function(n,l){n(l,1,0,"light");n(l,5,0,"light")},null)}function P(n){return j._42(0,[(n()(),j._16(0,0,null,null,7,null,null,null,null,null,null,null)),(n()(),j._40(-1,null,["\n                "])),(n()(),j._11(16777216,null,null,1,null,y)),j._15(3,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,null,["\n                "])),(n()(),j._16(5,0,null,null,1,"addon-mod-forum-post",[],null,[[null,"onPostChange"]],function(n,l,u){var o=!0;if("onPostChange"===l){o=!1!==n.component.postListChanged()&&o}return o},m,kl)),j._15(6,245760,null,0,yl.a,[On.a,H.a,Pl.a,V.a,bn.a,vn.a,Y.a,B.a,z.a,J.a,[2,q.a]],{post:[0,"post"],courseId:[1,"courseId"],discussionId:[2,"discussionId"],component:[3,"component"],componentId:[4,"componentId"],replyData:[5,"replyData"],originalData:[6,"originalData"],trackPosts:[7,"trackPosts"],forum:[8,"forum"],defaultSubject:[9,"defaultSubject"]},{onPostChange:"onPostChange"}),(n()(),j._40(-1,null,["\n            "]))],function(n,l){var u=l.component;n(l,3,0,!l.context.first);n(l,6,0,l.context.$implicit,u.courseId,u.discussionId,u.component,u.cmId,u.replyData,u.originalData,u.trackPosts,u.forum,u.defaultSubject)},null)}function k(n){return j._42(0,[(n()(),j._16(0,0,null,null,5,"ion-card",[],null,null,null,null,null)),j._15(1,16384,null,0,Ln.a,[pn.a,j.p,j.K],null,null),(n()(),j._40(-1,null,["\n            "])),(n()(),j._11(16777216,null,null,1,null,P)),j._15(4,802816,null,0,Mn.j,[j.W,j.T,j.v],{ngForOf:[0,"ngForOf"]},null),(n()(),j._40(-1,null,["\n        "]))],function(n,l){n(l,4,0,l.component.posts)},null)}function C(n){return j._42(0,[(n()(),j._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function D(n){return j._42(0,[(n()(),j._16(0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),j._40(-1,null,["\n                "])),(n()(),j._11(16777216,null,null,2,null,C)),j._15(3,540672,null,0,Mn.r,[j.W],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),j._33(4,{post:0}),(n()(),j._40(-1,null,["\n            "]))],function(n,l){n(l,3,0,n(l,4,0,l.context.$implicit),j._29(l.parent.parent,76))},null)}function O(n){return j._42(0,[(n()(),j._16(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),j._40(-1,null,["\n            "])),(n()(),j._11(16777216,null,null,1,null,D)),j._15(3,802816,null,0,Mn.j,[j.W,j.T,j.v],{ngForOf:[0,"ngForOf"]},null),(n()(),j._40(-1,null,["\n        "]))],function(n,l){n(l,3,0,l.component.posts)},null)}function x(n){return j._42(0,[(n()(),j._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function T(n){return j._42(0,[(n()(),j._16(0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),j._40(-1,null,["\n                    "])),(n()(),j._11(16777216,null,null,2,null,x)),j._15(3,540672,null,0,Mn.r,[j.W],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),j._33(4,{post:0}),(n()(),j._40(-1,null,["\n                "]))],function(n,l){n(l,3,0,n(l,4,0,l.context.$implicit),j._29(l.parent.parent.parent,76))},null)}function S(n){return j._42(0,[(n()(),j._16(0,0,null,null,4,"div",[["padding-left",""]],null,null,null,null,null)),(n()(),j._40(-1,null,["\n                "])),(n()(),j._11(16777216,null,null,1,null,T)),j._15(3,802816,null,0,Mn.j,[j.W,j.T,j.v],{ngForOf:[0,"ngForOf"]},null),(n()(),j._40(-1,null,["\n            "]))],function(n,l){n(l,3,0,l.parent.context.post.children)},null)}function w(n){return j._42(0,[(n()(),j._40(-1,null,["\n            "])),(n()(),j._16(1,0,null,null,5,"ion-card",[],null,null,null,null,null)),j._15(2,16384,null,0,Ln.a,[pn.a,j.p,j.K],null,null),(n()(),j._40(-1,null,["\n                "])),(n()(),j._16(4,0,null,null,1,"addon-mod-forum-post",[],null,[[null,"onPostChange"]],function(n,l,u){var o=!0;if("onPostChange"===l){o=!1!==n.component.postListChanged()&&o}return o},m,kl)),j._15(5,245760,null,0,yl.a,[On.a,H.a,Pl.a,V.a,bn.a,vn.a,Y.a,B.a,z.a,J.a,[2,q.a]],{post:[0,"post"],courseId:[1,"courseId"],discussionId:[2,"discussionId"],component:[3,"component"],componentId:[4,"componentId"],replyData:[5,"replyData"],originalData:[6,"originalData"],trackPosts:[7,"trackPosts"],forum:[8,"forum"],defaultSubject:[9,"defaultSubject"]},{onPostChange:"onPostChange"}),(n()(),j._40(-1,null,["\n            "])),(n()(),j._40(-1,null,["\n            "])),(n()(),j._11(16777216,null,null,1,null,S)),j._15(9,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,null,["\n        "]))],function(n,l){var u=l.component;n(l,5,0,l.context.post,u.courseId,u.discussionId,u.component,u.cmId,u.replyData,u.originalData,u.trackPosts,u.forum,u.defaultSubject);n(l,9,0,l.context.post.children.length&&l.context.post.children[0].subject)},null)}function K(n){return j._42(0,[j._37(402653184,1,{content:0}),(n()(),j._16(1,0,null,null,16,"ion-header",[],null,null,null,null,null)),j._15(2,16384,null,0,Dl.a,[pn.a,j.p,j.K,[2,Ol.a]],null,null),(n()(),j._40(-1,null,["\n    "])),(n()(),j._16(4,0,null,null,12,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,xl.b,xl.a)),j._15(5,49152,null,0,gn.a,[_l.a,[2,Ol.a],[2,On.a],pn.a,j.p,j.K],null,null),j._15(6,212992,null,0,Tl.a,[gn.a,yn.a,vn.a,F.a],null,null),(n()(),j._40(-1,3,["\n        "])),(n()(),j._11(16777216,null,3,1,null,p)),j._15(9,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,3,["\n        "])),(n()(),j._16(11,0,null,2,4,"ion-buttons",[["end",""]],null,null,null,null,null)),j._15(12,16384,null,1,Sl.a,[pn.a,j.p,j.K,[2,hn.a],[2,gn.a]],null,null),j._37(603979776,2,{_buttons:1}),(n()(),j._40(-1,null,["\n            "])),(n()(),j._40(-1,null,["\n        "])),(n()(),j._40(-1,3,["\n    "])),(n()(),j._40(-1,null,["\n"])),(n()(),j._40(-1,null,["\n"])),(n()(),j._16(19,0,null,null,25,"core-navbar-buttons",[["end",""]],null,null,null,wl.b,wl.a)),j._15(20,245760,null,1,Kl.a,[j.p,kn.a,V.a],null,null),j._37(603979776,3,{buttons:1}),(n()(),j._40(-1,0,["\n    "])),(n()(),j._16(23,0,null,0,20,"core-context-menu",[],null,null,null,jl.b,jl.a)),j._15(24,245760,null,0,Kn.a,[vn.a,Ll.a,j.p,V.a,[2,Wl.a]],null,null),(n()(),j._40(-1,0,["\n        "])),(n()(),j._11(16777216,null,0,1,null,h)),j._15(27,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,0,["\n        "])),(n()(),j._11(16777216,null,0,1,null,g)),j._15(30,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,0,["\n        "])),(n()(),j._16(32,0,null,0,2,"core-context-menu-item",[["iconAction","arrow-round-down"]],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.changeSort("flat-oldest")&&o}return o},Sn.b,Sn.a)),j._15(33,770048,null,0,wn.a,[Kn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),j._32(131072,jn.a,[vn.a,j.i]),(n()(),j._40(-1,0,["\n        "])),(n()(),j._16(36,0,null,0,2,"core-context-menu-item",[["iconAction","arrow-round-up"]],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.changeSort("flat-newest")&&o}return o},Sn.b,Sn.a)),j._15(37,770048,null,0,wn.a,[Kn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),j._32(131072,jn.a,[vn.a,j.i]),(n()(),j._40(-1,0,["\n        "])),(n()(),j._16(40,0,null,0,2,"core-context-menu-item",[["iconAction","swap"]],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.changeSort("nested")&&o}return o},Sn.b,Sn.a)),j._15(41,770048,null,0,wn.a,[Kn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),j._32(131072,jn.a,[vn.a,j.i]),(n()(),j._40(-1,0,["\n    "])),(n()(),j._40(-1,0,["\n"])),(n()(),j._40(-1,null,["\n"])),(n()(),j._16(46,0,null,null,32,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,El.b,El.a)),j._15(47,4374528,[[1,4]],0,xn.a,[pn.a,yn.a,al.a,j.p,j.K,_l.a,Al.a,j.D,[2,Ol.a],[2,On.a]],null,null),(n()(),j._40(-1,1,["\n    "])),(n()(),j._16(49,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,u){var o=!0;if("ionRefresh"===l){o=!1!==n.component.doRefresh(u)&&o}return o},null,null)),j._15(50,212992,null,0,Ul.a,[yn.a,xn.a,j.D,el.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),j._40(-1,null,["\n        "])),(n()(),j._16(52,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Ml.b,Ml.a)),j._15(53,114688,null,0,Rl.a,[Ul.a,pn.a],{pullingText:[0,"pullingText"]},null),j._32(131072,jn.a,[vn.a,j.i]),(n()(),j._40(-1,null,["\n    "])),(n()(),j._40(-1,1,["\n\n    "])),(n()(),j._16(57,0,null,1,20,"core-loading",[],null,null,null,Fl.b,Fl.a)),j._15(58,638976,null,0,Nl.a,[vn.a,j.p,F.a,$.a],{hideUntil:[0,"hideUntil"]},null),(n()(),j._40(-1,0,["\n        "])),(n()(),j._40(-1,0,["\n        "])),(n()(),j._11(16777216,null,0,1,null,I)),j._15(62,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,0,["\n\n        "])),(n()(),j._11(16777216,null,0,1,null,b)),j._15(65,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,0,["\n\n        "])),(n()(),j._11(16777216,null,0,1,null,v)),j._15(68,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,0,["\n\n        "])),(n()(),j._11(16777216,null,0,1,null,k)),j._15(71,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,0,["\n\n        "])),(n()(),j._11(16777216,null,0,1,null,O)),j._15(74,16384,null,0,Mn.k,[j.W,j.T],{ngIf:[0,"ngIf"]},null),(n()(),j._40(-1,0,["\n\n        "])),(n()(),j._11(0,[["nestedPosts",2]],0,0,null,w)),(n()(),j._40(-1,0,["\n    "])),(n()(),j._40(-1,1,["\n"])),(n()(),j._40(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,6,0);n(l,9,0,u.discussion),n(l,20,0),n(l,24,0);n(l,27,0,u.discussionLoaded&&!u.postHasOffline&&u.isOnline);n(l,30,0,u.discussionLoaded&&!u.isSplitViewOn&&u.postHasOffline&&u.isOnline);n(l,33,0,j._41(l,33,0,j._29(l,34).transform("addon.mod_forum.modeflatoldestfirst")),"arrow-round-down",500,"flat-oldest"==u.sort);n(l,37,0,j._41(l,37,0,j._29(l,38).transform("addon.mod_forum.modeflatnewestfirst")),"arrow-round-up",450,"flat-newest"==u.sort);n(l,41,0,j._41(l,41,0,j._29(l,42).transform("addon.mod_forum.modenested")),"swap",400,"nested"==u.sort);n(l,50,0,u.discussionLoaded);n(l,53,0,j._19(1,"",j._41(l,53,0,j._29(l,54).transform("core.pulltorefresh")),""));n(l,58,0,u.discussionLoaded);n(l,62,0,u.postHasOffline);n(l,65,0,u.locked);n(l,68,0,u.discussion);n(l,71,0,"nested"!=u.sort);n(l,74,0,"nested"==u.sort)},function(n,l){n(l,4,0,j._29(l,5)._hidden,j._29(l,5)._sbPadding);n(l,46,0,j._29(l,47).statusbarPadding,j._29(l,47)._hasRefresher);n(l,49,0,"inactive"!==j._29(l,50).state,j._29(l,50)._top);n(l,52,0,j._29(l,53).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var j=u(1),L=u(0),W=(u(9),u(4)),E=u(28),A=u(29),U=u(677),M=u(189),R=u(11),F=u(13),N=u(2),V=u(5),$=u(3),H=u(67),q=u(34),Y=u(164),z=u(207),B=u(251),J=u(252),G=function(){function n(n,l,u,o,t,e,a,i,r,s,c,_,d,f,m){var p=this;this.appProvider=o,this.eventsProvider=t,this.sitesProvider=e,this.domUtils=a,this.utils=i,this.translate=r,this.uploaderProvider=s,this.forumProvider=c,this.forumOffline=_,this.forumHelper=d,this.forumSync=f,this.svComponent=m,this.discussionLoaded=!1,this.sort="flat-oldest",this.replyData={replyingTo:0,isEditing:!1,subject:"",message:null,files:[]},this.originalData={subject:null,message:null,files:[]},this.refreshIcon="spinner",this.syncIcon="spinner",this.discussionStr="",this.component=Y.a.COMPONENT,this.courseId=n.get("courseId"),this.cmId=n.get("cmId"),this.forumId=n.get("forumId"),this.discussionId=n.get("discussionId"),this.trackPosts=n.get("trackPosts"),this.locked=n.get("locked"),this.isOnline=this.appProvider.isOnline(),this.onlineObserver=l.onchange().subscribe(function(n){u.run(function(){p.isOnline=p.appProvider.isOnline()})}),this.isSplitViewOn=this.svComponent&&this.svComponent.isOn(),this.discussionStr=r.instant("addon.mod_forum.discussion")}return n.prototype.ionViewDidLoad=function(){this.fetchPosts(!0,!1,!0)},n.prototype.ionViewDidEnter=function(){var n=this;this.syncObserver=this.eventsProvider.on(J.a.AUTO_SYNCED,function(l){l.forumId==n.forumId&&n.discussionId==l.discussionId&&l.userId==n.sitesProvider.getCurrentSiteUserId()&&(n.discussionLoaded=!1,n.refreshPosts())},this.sitesProvider.getCurrentSiteId()),this.syncManualObserver=this.eventsProvider.on(J.a.MANUAL_SYNCED,function(l){"discussion"!=l.source&&l.forumId==n.forumId&&l.userId==n.sitesProvider.getCurrentSiteUserId()&&(n.discussionLoaded=!1,n.refreshPosts())},this.sitesProvider.getCurrentSiteId()),this.eventsProvider.trigger(Y.a.VIEW_DISCUSSION_EVENT,{forumId:this.forumId,discussion:this.discussionId},this.sitesProvider.getCurrentSiteId())},n.prototype.ionViewCanLeave=function(){var n=this;return(this.forumHelper.hasPostDataChanged(this.replyData,this.originalData)?this.domUtils.showConfirm(this.translate.instant("core.confirmcanceledit")):Promise.resolve()).then(function(){n.uploaderProvider.clearTmpFiles(n.replyData.files)})},n.prototype.fetchForum=function(){return this.courseId&&this.cmId?this.forumProvider.getForum(this.courseId,this.cmId):this.courseId&&this.forumId?this.forumProvider.getForumById(this.courseId,this.forumId):Promise.reject(null)},n.prototype.fetchPosts=function(n,l,u){var o=this,t=[],e=[],a=!1;return(n?this.syncDiscussion(l).catch(function(){}):Promise.resolve()).then(function(){return o.forumProvider.getDiscussionPosts(o.discussionId).then(function(n){t=n}).then(function(){return o.forumOffline.getDiscussionReplies(o.discussionId).then(function(n){o.postHasOffline=!!n.length;var l=[],u={};return t.forEach(function(n){u[n.id]=n,a=a||!n.postread}),n.forEach(function(n){o.forumId||(o.forumId=n.forumid),o.courseId||(o.courseId=n.courseid),l.push(o.forumHelper.convertOfflineReplyToOnline(n).then(function(n){e.push(n),u[n.parent].canreply=!1}))}),Promise.all(l).then(function(){t=o.utils.objectToArray(u)})})})}).then(function(){var n=e.concat(t);if(o.discussion=o.forumProvider.extractStartingPost(n),"nested"==o.sort)o.forumProvider.sortDiscussionPosts(n,"ASC"),o.posts=o.utils.formatTree(n,"parent","id",o.discussion.id);else{o.forumProvider.sortDiscussionPosts(n,"flat-newest"==o.sort?"DESC":"ASC"),o.posts=n}return o.defaultSubject=o.translate.instant("addon.mod_forum.re")+" "+o.discussion.subject,o.replyData.subject=o.defaultSubject,o.fetchForum().then(function(n){o.discussion.userfullname&&0==o.discussion.parent&&"single"==n.type&&(o.discussion.userfullname=null),void 0!==n.istracked&&(o.trackPosts=n.istracked),o.forumId=n.id,o.cmId=n.cmid,o.forum=n}).catch(function(){o.forum={}})}).catch(function(n){o.domUtils.showErrorModal(n)}).finally(function(){o.discussionLoaded=!0,o.refreshIcon="refresh",o.syncIcon="sync",(u||a&&o.trackPosts)&&o.forumProvider.logDiscussionView(o.discussionId).catch(function(){}).finally(function(){o.eventsProvider.trigger(Y.a.MARK_READ_EVENT,{courseId:o.courseId,moduleId:o.cmId},o.sitesProvider.getCurrentSiteId())})})},n.prototype.syncDiscussion=function(n){var l=this;return this.forumSync.syncDiscussionReplies(this.discussionId).then(function(n){return n.warnings&&n.warnings.length&&l.domUtils.showErrorModal(n.warnings[0]),n&&n.updated&&l.eventsProvider.trigger(J.a.MANUAL_SYNCED,{forumId:l.forumId,userId:l.sitesProvider.getCurrentSiteUserId(),source:"discussion"},l.sitesProvider.getCurrentSiteId()),n.updated}).catch(function(u){return n&&l.domUtils.showErrorModalDefault(u,"core.errorsync",!0),Promise.reject(null)})},n.prototype.doRefresh=function(n,l,u){return void 0===u&&(u=!1),this.discussionLoaded?this.refreshPosts(!0,u).finally(function(){n&&n.complete(),l&&l()}):Promise.resolve()},n.prototype.refreshPosts=function(n,l){var u=this;return this.domUtils.scrollToTop(this.content),this.refreshIcon="spinner",this.syncIcon="spinner",this.forumProvider.invalidateDiscussionPosts(this.discussionId).catch(function(){}).then(function(){return u.fetchPosts(n,l)})},n.prototype.changeSort=function(n){return this.discussionLoaded=!1,this.sort=n,this.domUtils.scrollToTop(this.content),this.fetchPosts()},n.prototype.postListChanged=function(){var n=this;this.eventsProvider.trigger(Y.a.REPLY_DISCUSSION_EVENT,{forumId:this.forumId,discussionId:this.discussionId,cmId:this.cmId},this.sitesProvider.getCurrentSiteId()),this.discussionLoaded=!1,this.refreshPosts().finally(function(){n.discussionLoaded=!0})},n.prototype.ionViewWillLeave=function(){this.syncObserver&&this.syncObserver.off(),this.syncManualObserver&&this.syncManualObserver.off()},n.prototype.ngOnDestroy=function(){this.onlineObserver&&this.onlineObserver.unsubscribe()},n=Object(L.__decorate)([Object(L.__param)(14,Object(j.E)())],n)}(),Q=function(){return function(){}}(),X=u(1344),Z=u(1345),nn=u(1346),ln=u(1347),un=u(1348),on=u(1349),tn=u(1350),en=u(1351),an=u(1352),rn=u(1355),sn=u(1356),cn=u(1357),_n=u(1358),dn=u(1387),fn=u(1354),mn=u(335),pn=u(7),hn=u(247),gn=u(200),In=u(40),bn=u(10),vn=u(18),yn=u(15),Pn=u(26),kn=u(6),Cn=u(17),Dn=u(19),On=u(22),xn=u(24),Tn=u(37),Sn=u(89),wn=u(80),Kn=u(73),jn=u(25),Ln=u(87),Wn=u(46),En=u(226),An=u(134),Un=u(121),Mn=u(8),Rn=u(203),Fn=u(171),Nn=u(133),Vn=u(65),$n=u(345),Hn=u(254),qn=u(50),Yn=u(30),zn=u(21),Bn=u(20),Jn=u(27),Gn=u(32),Qn=u(45),Xn=u(42),Zn=u(446),nl=u(279),ll=u(135),ul=u(101),ol=u(100),tl=u(77),el=u(38),al=u(31),il=u(62),rl=u(94),sl=u(23),cl=u(79),_l=u(33),dl=u(275),fl=u(225),ml=u(127),pl=u(340),hl=u(280),gl=u(222),Il=u(185),bl=u(186),vl=u(449),yl=u(1398),Pl=u(84),kl=j._14({encapsulation:2,styles:[],data:{}}),Cl=u(110),Dl=u(434),Ol=u(36),xl=u(1353),Tl=u(662),Sl=u(435),wl=u(85),Kl=u(78),jl=u(88),Ll=u(63),Wl=u(72),El=u(184),Al=u(109),Ul=u(146),Ml=u(201),Rl=u(158),Fl=u(49),Nl=u(48),Vl=u(61),$l=j._14({encapsulation:2,styles:[],data:{}}),Hl=j._12("page-addon-mod-forum-discussion",G,function(n){return j._42(0,[(n()(),j._16(0,0,null,null,1,"page-addon-mod-forum-discussion",[],null,null,null,K,$l)),j._15(1,180224,null,0,G,[Vl.a,M.a,j.D,R.a,F.a,N.a,V.a,$.a,vn.a,H.a,Y.a,z.a,B.a,J.a,[2,q.a]],null,null)],null,null)},{},{},[]),ql=u(331),Yl=u(332),zl=u(334),Bl=u(333),Jl=u(433),Gl=u(661),Ql=u(108),Xl=u(66),Zl=u(248);u.d(l,"AddonModForumDiscussionPageModuleNgFactory",function(){return nu});var nu=j._13(Q,[],function(n){return j._25([j._26(512,j.n,j._6,[[8,[X.a,Z.a,nn.a,ln.a,un.a,on.a,tn.a,en.a,an.a,rn.a,sn.a,cn.a,_n.a,dn.a,Hl]],[3,j.n],j.B]),j._26(4608,Mn.m,Mn.l,[j.x,[2,Mn.v]]),j._26(4608,sl.x,sl.x,[]),j._26(4608,sl.d,sl.d,[]),j._26(4608,ql.b,ql.a,[]),j._26(4608,Yl.a,Yl.b,[]),j._26(4608,zl.b,zl.a,[]),j._26(4608,Bl.b,Bl.a,[]),j._26(4608,vn.a,vn.a,[Jl.a,ql.b,Yl.a,zl.b,Bl.b,vn.b,vn.c]),j._26(512,Mn.b,Mn.b,[]),j._26(512,sl.v,sl.v,[]),j._26(512,sl.i,sl.i,[]),j._26(512,sl.s,sl.s,[]),j._26(512,Gl.a,Gl.a,[]),j._26(512,W.a,W.a,[]),j._26(512,A.a,A.a,[]),j._26(512,Ql.a,Ql.a,[]),j._26(512,E.a,E.a,[]),j._26(512,Xl.a,Xl.a,[]),j._26(512,U.a,U.a,[]),j._26(512,Gl.b,Gl.b,[]),j._26(512,Q,Q,[]),j._26(256,vn.c,void 0,[]),j._26(256,vn.b,void 0,[]),j._26(256,Zl.a,G,[])])})}});