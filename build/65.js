webpackJsonp([65],{1906:function(n,l,t){"use strict";function e(n){return o._42(0,[(n()(),o._16(0,0,null,null,2,"core-empty-box",[["icon","chatbubbles"]],null,null,null,R.b,R.a)),o._15(1,49152,null,0,T.a,[],{message:[0,"message"],icon:[1,"icon"]},null),o._32(131072,D.a,[M.a,o.i])],function(n,l){n(l,1,0,o._41(l,1,0,o._29(l,2).transform("core.nocomments")),"chatbubbles")},null)}function a(n){return o._42(0,[(n()(),o._16(0,0,null,null,31,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,$.a,[j.a,o.p,o.K],null,null),(n()(),o._40(-1,null,["\n            "])),(n()(),o._16(3,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,E.b,E.a)),o._15(4,1097728,null,3,F.a,[O.a,j.a,o.p,o.K,[2,V.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(8,16384,null,0,W.a,[],null,null),(n()(),o._40(-1,2,["\n                "])),(n()(),o._16(10,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,A.b,A.a)),o._15(11,638976,null,0,B.a,[J.a,r.a,N.a,q.a],{user:[0,"user"]},null),o._15(12,16384,null,0,z.a,[],null,null),(n()(),o._40(-1,2,["\n                "])),(n()(),o._16(14,0,null,2,1,"h2",[],null,null,null,null,null)),(n()(),o._40(15,null,["",""])),(n()(),o._40(-1,2,["\n                "])),(n()(),o._16(17,0,null,2,1,"p",[],null,null,null,null,null)),(n()(),o._40(18,null,["",""])),(n()(),o._40(-1,2,["\n            "])),(n()(),o._40(-1,null,["\n            "])),(n()(),o._16(21,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,E.b,E.a)),o._15(22,1097728,null,3,F.a,[O.a,j.a,o.p,o.K,[2,V.a]],null,null),o._37(335544320,5,{contentLabel:0}),o._37(603979776,6,{_buttons:1}),o._37(603979776,7,{_icons:1}),o._15(26,16384,null,0,W.a,[],null,null),(n()(),o._40(-1,2,["\n                "])),(n()(),o._16(28,0,null,2,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),o._15(29,540672,null,0,G.a,[o.p,r.a,s.a,H.a,M.a,Q.a,N.a,S.a,X.a,Y.a,q.a,Z.a,[2,J.a],[2,nn.a],[2,ln.a],tn.a,en.a],{text:[0,"text"],clean:[1,"clean"]},null),(n()(),o._40(-1,2,["\n            "])),(n()(),o._40(-1,null,["\n        "]))],function(n,l){n(l,11,0,l.context.$implicit);n(l,29,0,l.context.$implicit.content,"true")},function(n,l){n(l,15,0,l.context.$implicit.fullname);n(l,18,0,l.context.$implicit.time)})}function u(n){return o._42(0,[o._37(402653184,1,{content:0}),(n()(),o._16(1,0,null,null,12,"ion-header",[],null,null,null,null,null)),o._15(2,16384,null,0,an.a,[j.a,o.p,o.K,[2,un.a]],null,null),(n()(),o._40(-1,null,["\n    "])),(n()(),o._16(4,0,null,null,8,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,on.b,on.a)),o._15(5,49152,null,0,rn.a,[sn.a,[2,un.a],[2,J.a],j.a,o.p,o.K],null,null),o._15(6,212992,null,0,_n.a,[rn.a,Q.a,M.a,en.a],null,null),(n()(),o._40(-1,3,["\n        "])),(n()(),o._16(8,0,null,3,3,"ion-title",[],null,null,null,cn.b,cn.a)),o._15(9,49152,null,0,mn.a,[j.a,o.p,o.K,[2,hn.a],[2,rn.a]],null,null),(n()(),o._16(10,0,null,0,1,"core-format-text",[],null,null,null,null,null)),o._15(11,540672,null,0,G.a,[o.p,r.a,s.a,H.a,M.a,Q.a,N.a,S.a,X.a,Y.a,q.a,Z.a,[2,J.a],[2,nn.a],[2,ln.a],tn.a,en.a],{text:[0,"text"]},null),(n()(),o._40(-1,3,["\n    "])),(n()(),o._40(-1,null,["\n"])),(n()(),o._40(-1,null,["\n"])),(n()(),o._16(15,0,null,null,20,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,dn.b,dn.a)),o._15(16,4374528,[[1,4]],0,nn.a,[j.a,Q.a,fn.a,o.p,o.K,sn.a,pn.a,o.D,[2,un.a],[2,J.a]],null,null),(n()(),o._40(-1,1,["\n    "])),(n()(),o._16(18,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,t){var e=!0;if("ionRefresh"===l){e=!1!==n.component.refreshComments(t)&&e}return e},null,null)),o._15(19,212992,null,0,bn.a,[Q.a,nn.a,o.D,gn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),o._40(-1,null,["\n        "])),(n()(),o._16(21,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,vn.b,vn.a)),o._15(22,114688,null,0,xn.a,[bn.a,j.a],{pullingText:[0,"pullingText"]},null),o._32(131072,D.a,[M.a,o.i]),(n()(),o._40(-1,null,["\n    "])),(n()(),o._40(-1,1,["\n    "])),(n()(),o._16(26,0,null,1,8,"core-loading",[],null,null,null,wn.b,wn.a)),o._15(27,638976,null,0,Ln.a,[M.a,o.p,en.a,N.a],{hideUntil:[0,"hideUntil"]},null),(n()(),o._40(-1,0,["\n        "])),(n()(),o._11(16777216,null,0,1,null,e)),o._15(30,16384,null,0,Pn.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(n()(),o._40(-1,0,["\n\n        "])),(n()(),o._11(16777216,null,0,1,null,a)),o._15(33,802816,null,0,Pn.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(n()(),o._40(-1,0,["\n    "])),(n()(),o._40(-1,1,["\n"])),(n()(),o._40(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,6,0);n(l,11,0,t.title);n(l,19,0,t.commentsLoaded);n(l,22,0,o._19(1,"",o._41(l,22,0,o._29(l,23).transform("core.pulltorefresh")),""));n(l,27,0,t.commentsLoaded);n(l,30,0,!t.comments||!t.comments.length);n(l,33,0,t.comments)},function(n,l){n(l,4,0,o._29(l,5)._hidden,o._29(l,5)._sbPadding);n(l,15,0,o._29(l,16).statusbarPadding,o._29(l,16)._hasRefresher);n(l,18,0,"inactive"!==o._29(l,19).state,o._29(l,19)._top);n(l,21,0,o._29(l,22).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var o=t(1),i=(t(0),t(9),t(4)),r=t(2),s=t(5),_=t(45),c=t(168),m=function(){function n(n,l,t,e,a,u){this.userProvider=t,this.domUtils=e,this.translate=a,this.commentsProvider=u,this.comments=[],this.commentsLoaded=!1,this.contextLevel=n.get("contextLevel"),this.instanceId=n.get("instanceId"),this.component=n.get("component"),this.itemId=n.get("itemId"),this.area=n.get("area")||"",this.page=n.get("page")||0,this.title=n.get("title")||this.translate.instant("core.comments")}return n.prototype.ionViewDidLoad=function(){var n=this;this.fetchComments().finally(function(){n.commentsLoaded=!0})},n.prototype.fetchComments=function(){var n=this;return this.commentsProvider.getComments(this.contextLevel,this.instanceId,this.component,this.itemId,this.area,this.page).then(function(l){n.comments=l,n.comments.sort(function(n,l){return l.timecreated-n.timecreated}),n.comments.forEach(function(l){n.userProvider.getProfile(l.userid,void 0,!0).then(function(n){l.profileimageurl=n.profileimageurl})})}).catch(function(l){return l?"assignsubmission_comments"==n.component?n.domUtils.showAlertTranslated("core.notice","core.commentsnotworking"):n.domUtils.showErrorModal(l):n.domUtils.showErrorModal(n.translate.instant("core.error")+": get_comments"),Promise.reject(null)})},n.prototype.refreshComments=function(n){var l=this;this.commentsProvider.invalidateCommentsData(this.contextLevel,this.instanceId,this.component,this.itemId,this.area,this.page).finally(function(){return l.fetchComments().finally(function(){n.complete()})})},n}(),h=t(29),d=t(30),f=t(442),p=function(){return function(){}}(),b=t(1345),g=t(1346),v=t(1347),x=t(1348),w=t(1349),L=t(1350),P=t(1351),y=t(1352),I=t(1353),C=t(1356),K=t(1357),k=t(1358),U=t(670),R=t(120),T=t(109),D=t(25),M=t(19),$=t(87),j=t(7),E=t(31),F=t(21),O=t(20),V=t(27),W=t(33),A=t(222),B=t(187),J=t(22),N=t(3),q=t(10),z=t(186),G=t(41),H=t(11),Q=t(15),S=t(26),X=t(6),Y=t(17),Z=t(18),nn=t(24),ln=t(35),tn=t(38),en=t(13),an=t(434),un=t(37),on=t(1354),rn=t(200),sn=t(34),_n=t(662),cn=t(1355),mn=t(336),hn=t(246),dn=t(185),fn=t(32),pn=t(107),bn=t(146),gn=t(39),vn=t(201),xn=t(158),wn=t(49),Ln=t(48),Pn=t(8),yn=t(61),In=o._14({encapsulation:2,styles:[],data:{}}),Cn=o._12("page-core-comments-viewer",m,function(n){return o._42(0,[(n()(),o._16(0,0,null,null,1,"page-core-comments-viewer",[],null,null,null,u,In)),o._15(1,49152,null,0,m,[yn.a,r.a,_.a,s.a,M.a,c.a],null,null)],null,null)},{},{},[]),Kn=t(23),kn=t(332),Un=t(333),Rn=t(335),Tn=t(334),Dn=t(433),Mn=t(661),$n=t(106),jn=t(247);t.d(l,"CoreCommentsViewerPageModuleNgFactory",function(){return En});var En=o._13(p,[],function(n){return o._25([o._26(512,o.n,o._6,[[8,[b.a,g.a,v.a,x.a,w.a,L.a,P.a,y.a,I.a,C.a,K.a,k.a,U.a,Cn]],[3,o.n],o.B]),o._26(4608,Pn.m,Pn.l,[o.x,[2,Pn.v]]),o._26(4608,Kn.x,Kn.x,[]),o._26(4608,Kn.d,Kn.d,[]),o._26(4608,kn.b,kn.a,[]),o._26(4608,Un.a,Un.b,[]),o._26(4608,Rn.b,Rn.a,[]),o._26(4608,Tn.b,Tn.a,[]),o._26(4608,M.a,M.a,[Dn.a,kn.b,Un.a,Rn.b,Tn.b,M.b,M.c]),o._26(512,Pn.b,Pn.b,[]),o._26(512,Kn.v,Kn.v,[]),o._26(512,Kn.i,Kn.i,[]),o._26(512,Kn.s,Kn.s,[]),o._26(512,Mn.a,Mn.a,[]),o._26(512,i.a,i.a,[]),o._26(512,d.a,d.a,[]),o._26(512,$n.a,$n.a,[]),o._26(512,h.a,h.a,[]),o._26(512,f.a,f.a,[]),o._26(512,Mn.b,Mn.b,[]),o._26(512,p,p,[]),o._26(256,M.c,void 0,[]),o._26(256,M.b,void 0,[]),o._26(256,jn.a,m,[])])})}});