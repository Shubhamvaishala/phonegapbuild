webpackJsonp([12],{1846:function(n,e,t){"use strict";function l(n){return _._42(0,[(n()(),_._16(0,0,null,null,0,"img",[["class","core-bar-button-image"]],[[8,"src",4]],null,null,null,null))],null,function(n,e){n(e,0,0,e.component.conversationImage)})}function s(n){return _._42(0,[(n()(),_._16(0,0,null,null,1,"core-icon",[["name","fa-star"]],null,null,null,Y.b,Y.a)),_._15(1,245760,null,0,q.a,[_.p],{name:[0,"name"]},null)],function(n,e){n(e,1,0,"fa-star")},null)}function o(n){return _._42(0,[(n()(),_._16(0,0,null,null,7,"ion-chip",[["class","addon-messages-date"],["color","light"]],null,null,null,null,null)),_._15(1,16384,null,0,J.a,[Q.a,_.p,_.K],{color:[0,"color"]},null),(n()(),_._40(-1,null,["\n                    "])),(n()(),_._16(3,0,null,null,3,"ion-label",[],null,null,null,null,null)),_._15(4,16384,null,0,Z.a,[Q.a,_.p,_.K,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),_._40(5,null,["",""])),_._34(6,2),(n()(),_._40(-1,null,["\n                "]))],function(n,e){n(e,1,0,"light")},function(n,e){n(e,5,0,_._41(e,5,0,n(e,6,0,_._29(e.parent.parent,0),e.parent.context.$implicit.timecreated,"LL")))})}function a(n){return _._42(0,[(n()(),_._16(0,0,null,null,11,"ion-chip",[["class","addon-messages-unreadfrom"],["color","light"]],null,null,null,null,null)),_._15(1,16384,null,0,J.a,[Q.a,_.p,_.K],{color:[0,"color"]},null),(n()(),_._40(-1,null,["\n                    "])),(n()(),_._16(3,0,null,null,4,"ion-label",[],null,null,null,null,null)),_._15(4,16384,null,0,Z.a,[Q.a,_.p,_.K,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),_._40(5,null,["",""])),_._33(6,{$a:0}),_._32(131072,nn.a,[en.a,_.i]),(n()(),_._40(-1,null,["\n                    "])),(n()(),_._16(9,0,null,null,1,"ion-icon",[["name","arrow-round-down"],["role","img"]],[[2,"hide",null]],null,null,null,null)),_._15(10,147456,null,0,tn.a,[Q.a,_.p,_.K],{name:[0,"name"]},null),(n()(),_._40(-1,null,["\n                "]))],function(n,e){n(e,1,0,"light");n(e,10,0,"arrow-round-down")},function(n,e){var t=e.component;n(e,5,0,_._41(e,5,0,_._29(e,7).transform("addon.messages.newmessages",n(e,6,0,t.title))));n(e,9,0,_._29(e,10)._hidden)})}function i(n){return _._42(0,[(n()(),_._16(0,0,null,null,7,"ion-avatar",[["item-start",""]],null,null,null,null,null)),_._15(1,16384,null,0,ln.a,[],null,null),(n()(),_._40(-1,null,["\n                        "])),(n()(),_._16(3,0,null,null,3,"img",[["core-external-content",""],["onError","this.src='assets/img/user-avatar.png'"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),_._15(4,4210688,null,0,sn.a,[_.p,D.a,on.a,an.a,b.a,P.a,rn.a,x.a,E.a],null,null),_._33(5,{$a:0}),_._32(131072,nn.a,[en.a,_.i]),(n()(),_._40(-1,null,["\n                    "]))],null,function(n,e){var t=e.component;n(e,3,0,t.members[e.parent.context.$implicit.useridfrom].profileimageurl,_._41(e,3,1,_._29(e,6).transform("core.pictureof",n(e,5,0,t.members[e.parent.context.$implicit.useridfrom].fullname))))})}function r(n){return _._42(0,[(n()(),_._16(0,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),_._40(1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.members[e.parent.context.$implicit.useridfrom].fullname)})}function u(n){return _._42(0,[(n()(),_._16(0,0,null,null,3,"ion-note",[],null,null,null,null,null)),_._15(1,16384,null,0,un.a,[Q.a,_.p,_.K],null,null),(n()(),_._40(2,null,["\n                        ","\n                    "])),_._34(3,2)],null,function(n,e){n(e,2,0,_._41(e,2,0,n(e,3,0,_._29(e.parent.parent,0),e.parent.context.$implicit.timecreated,"dftimedate")))})}function c(n){return _._42(0,[(n()(),_._16(0,0,null,null,3,"ion-note",[],null,null,null,null,null)),_._15(1,16384,null,0,un.a,[Q.a,_.p,_.K],null,null),(n()(),_._16(2,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),_._15(3,147456,null,0,tn.a,[Q.a,_.p,_.K],{name:[0,"name"]},null)],function(n,e){n(e,3,0,"time")},function(n,e){n(e,2,0,_._29(e,3)._hidden)})}function d(n){return _._42(0,[(n()(),_._16(0,0,null,null,6,"button",[["class","addon-messages-delete-button"],["clear","true"],["icon-only",""],["ion-button",""]],[[24,"@coreSlideInOut",0],[1,"aria-label",0]],[[null,"click"]],function(n,e,t){var l=!0;if("click"===e){l=!1!==n.component.deleteMessage(n.parent.context.$implicit,n.parent.context.index)&&l}return l},cn.b,cn.a)),_._15(1,1097728,[[5,4]],0,dn.a,[[8,""],Q.a,_.p,_.K],{clear:[0,"clear"]},null),_._32(131072,nn.a,[en.a,_.i]),(n()(),_._40(-1,0,["\n                        "])),(n()(),_._16(4,0,null,0,1,"ion-icon",[["color","danger"],["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),_._15(5,147456,null,0,tn.a,[Q.a,_.p,_.K],{color:[0,"color"],name:[1,"name"]},null),(n()(),_._40(-1,0,["\n                    "]))],function(n,e){n(e,1,0,"true");n(e,5,0,"danger","trash")},function(n,e){n(e,0,0,"fromRight",_._41(e,0,1,_._29(e,2).transform("addon.messages.deletemessage")));n(e,4,0,_._29(e,5)._hidden)})}function g(n){return _._42(0,[(n()(),_._16(0,0,null,null,39,null,null,null,null,null,null,null)),(n()(),_._40(-1,null,["\n                "])),(n()(),_._11(16777216,null,null,1,null,o)),_._15(3,16384,null,0,gn.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(n()(),_._40(-1,null,["\n\n                "])),(n()(),_._11(16777216,null,null,1,null,a)),_._15(6,16384,null,0,gn.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(n()(),_._40(-1,null,["\n\n                "])),(n()(),_._16(8,0,null,null,30,"ion-item",[["class","addon-message item item-block"],["text-wrap",""]],[[2,"addon-message-mine",null],[24,"@coreSlideInOut",0]],[[null,"longPress"]],function(n,e,t){var l=!0;if("longPress"===e){l=!1!==n.component.copyMessage(n.context.$implicit)&&l}return l},fn.b,fn.a)),_._15(9,212992,null,0,hn.a,[_.p],null,{longPress:"longPress"}),_._15(10,1097728,null,3,mn.a,[_n.a,Q.a,_.p,_.K,[2,pn.a]],null,null),_._37(335544320,4,{contentLabel:0}),_._37(603979776,5,{_buttons:1}),_._37(603979776,6,{_icons:1}),_._15(14,16384,null,0,vn.a,[],null,null),(n()(),_._40(-1,2,["\n                    "])),(n()(),_._40(-1,2,["\n                    "])),(n()(),_._11(16777216,null,0,1,null,i)),_._15(18,16384,null,0,gn.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(n()(),_._40(-1,2,["\n                    "])),(n()(),_._11(16777216,null,2,1,null,r)),_._15(21,16384,null,0,gn.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(n()(),_._40(-1,2,["\n\n                    "])),(n()(),_._40(-1,2,["\n                    "])),(n()(),_._16(24,0,null,2,4,"p",[["class","addon-message-text"]],null,null,null,null,null)),(n()(),_._40(-1,null,["\n                        "])),(n()(),_._16(26,0,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(n,e,t){var l=!0;if("afterRender"===e){l=!1!==(n.context.last&&n.component.scrollToBottom())&&l}return l},null,null)),_._15(27,540672,null,0,yn.a,[_.p,b.a,P.a,bn.a,en.a,an.a,E.a,rn.a,D.a,on.a,x.a,In.a,[2,Mn.a],[2,Cn.a],[2,k.a],wn.a,y.a],{text:[0,"text"]},{afterRender:"afterRender"}),(n()(),_._40(-1,null,["\n                    "])),(n()(),_._40(-1,2,["\n                    "])),(n()(),_._11(16777216,null,2,1,null,u)),_._15(31,16384,null,0,gn.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(n()(),_._40(-1,2,["\n                    "])),(n()(),_._11(16777216,null,2,1,null,c)),_._15(34,16384,null,0,gn.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(n()(),_._40(-1,2,["\n\n                    "])),(n()(),_._11(16777216,null,2,1,null,d)),_._15(37,16384,null,0,gn.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(n()(),_._40(-1,2,["\n                "])),(n()(),_._40(-1,null,["\n            "]))],function(n,e){var t=e.component;n(e,3,0,e.context.$implicit.showDate);n(e,6,0,t.unreadMessageFrom&&e.context.$implicit.id==t.unreadMessageFrom),n(e,9,0);n(e,18,0,e.context.$implicit.showUserData);n(e,21,0,e.context.$implicit.showUserData);n(e,27,0,e.context.$implicit.text);n(e,31,0,!e.context.$implicit.pending);n(e,34,0,e.context.$implicit.pending);n(e,37,0,!e.context.$implicit.sending&&t.showDelete)},function(n,e){var t=e.component;n(e,8,0,e.context.$implicit.useridfrom==t.currentUserId,e.context.$implicit.useridfrom==t.currentUserId?"":"fromLeft")})}function f(n){return _._42(0,[(n()(),_._16(0,0,null,null,2,"core-empty-box",[["icon","chatbubbles"]],null,null,null,Pn.b,Pn.a)),_._15(1,49152,null,0,En.a,[],{message:[0,"message"],icon:[1,"icon"]},null),_._32(131072,nn.a,[en.a,_.i])],function(n,e){n(e,1,0,_._41(e,1,0,_._29(e,2).transform("addon.messages.nomessages")),"chatbubbles")},null)}function h(n){return _._42(0,[(n()(),_._16(0,0,null,null,11,"ion-footer",[["class","footer-adjustable"],["color","light"]],null,null,null,null,null)),_._15(1,16384,null,0,Dn.a,[Q.a,_.p,_.K,[2,xn.a]],{color:[0,"color"]},null),(n()(),_._40(-1,null,["\n    "])),(n()(),_._16(3,0,null,null,7,"ion-toolbar",[["class","toolbar"],["color","light"],["position","bottom"]],[[2,"statusbar-padding",null]],null,null,kn.b,kn.a)),_._15(4,49152,null,0,Un.a,[Q.a,_.p,_.K],{color:[0,"color"]},null),(n()(),_._40(-1,3,["\n        "])),(n()(),_._40(-1,3,["\n        "])),(n()(),_._16(7,0,null,3,2,"core-send-message-form",[],null,[[null,"onSubmit"],[null,"onResize"]],function(n,e,t){var l=!0,s=n.component;if("onSubmit"===e){l=!1!==s.sendMessage(t)&&l}if("onResize"===e){l=!1!==s.resizeContent()&&l}return l},Tn.b,Tn.a)),_._15(8,114688,null,0,Sn.a,[E.a,bn.a],{placeholder:[0,"placeholder"],showKeyboard:[1,"showKeyboard"]},{onSubmit:"onSubmit",onResize:"onResize"}),_._32(131072,nn.a,[en.a,_.i]),(n()(),_._40(-1,3,["\n    "])),(n()(),_._40(-1,null,["\n"]))],function(n,e){var t=e.component;n(e,1,0,"light");n(e,4,0,"light");n(e,8,0,_._41(e,8,0,_._29(e,9).transform("addon.messages.newmessage")),t.showKeyboard)},function(n,e){n(e,3,0,_._29(e,4)._sbPadding)})}function m(n){return _._42(0,[_._32(0,An.a,[D.a,en.a]),_._37(402653184,1,{content:0}),(n()(),_._16(2,0,null,null,53,"ion-header",[],null,null,null,null,null)),_._15(3,16384,null,0,Ln.a,[Q.a,_.p,_.K,[2,xn.a]],null,null),(n()(),_._40(-1,null,["\n    "])),(n()(),_._16(5,0,null,null,20,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,On.b,On.a)),_._15(6,49152,null,0,Rn.a,[Kn.a,[2,xn.a],[2,Mn.a],Q.a,_.p,_.K],null,null),_._15(7,212992,null,0,Fn.a,[Rn.a,an.a,en.a,y.a],null,null),(n()(),_._40(-1,3,["\n        "])),(n()(),_._16(9,0,null,3,11,"ion-title",[],null,null,null,Nn.b,Nn.a)),_._15(10,49152,null,0,$n.a,[Q.a,_.p,_.K,[2,Un.a],[2,Rn.a]],null,null),(n()(),_._40(-1,0,["\n            "])),(n()(),_._11(16777216,null,0,1,null,l)),_._15(13,16384,null,0,gn.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(n()(),_._40(-1,0,["\n            "])),(n()(),_._16(15,0,null,0,1,"core-format-text",[],null,null,null,null,null)),_._15(16,540672,null,0,yn.a,[_.p,b.a,P.a,bn.a,en.a,an.a,E.a,rn.a,D.a,on.a,x.a,In.a,[2,Mn.a],[2,Cn.a],[2,k.a],wn.a,y.a],{text:[0,"text"]},null),(n()(),_._40(-1,0,["\n            "])),(n()(),_._11(16777216,null,0,1,null,s)),_._15(19,16384,null,0,gn.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(n()(),_._40(-1,0,["\n        "])),(n()(),_._40(-1,3,["\n        "])),(n()(),_._16(22,0,null,2,2,"ion-buttons",[["end",""]],null,null,null,null,null)),_._15(23,16384,null,1,Bn.a,[Q.a,_.p,_.K,[2,Un.a],[2,Rn.a]],null,null),_._37(603979776,2,{_buttons:1}),(n()(),_._40(-1,3,["\n    "])),(n()(),_._40(-1,null,["\n    "])),(n()(),_._16(27,0,null,null,27,"core-navbar-buttons",[["end",""]],null,null,null,Xn.b,Xn.a)),_._15(28,245760,null,1,Gn.a,[_.p,D.a,P.a],null,null),_._37(603979776,3,{buttons:1}),(n()(),_._40(-1,0,["\n        "])),(n()(),_._16(31,0,null,0,22,"core-context-menu",[],null,null,null,Vn.b,Vn.a)),_._15(32,245760,null,0,zn.a,[en.a,Wn.a,_.p,P.a,[2,jn.a]],null,null),(n()(),_._40(-1,0,["\n            "])),(n()(),_._16(34,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.viewInfo()&&l}return l},Hn.b,Hn.a)),_._15(35,770048,null,0,Yn.a,[zn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),_._32(131072,nn.a,[en.a,_.i]),(n()(),_._40(-1,0,["\n            "])),(n()(),_._16(38,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.viewInfo()&&l}return l},Hn.b,Hn.a)),_._15(39,770048,null,0,Yn.a,[zn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),_._32(131072,nn.a,[en.a,_.i]),(n()(),_._40(-1,0,["\n            "])),(n()(),_._16(42,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.changeFavourite(t)&&l}return l},Hn.b,Hn.a)),_._15(43,770048,null,0,Yn.a,[zn.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),_._32(131072,nn.a,[en.a,_.i]),(n()(),_._40(-1,0,["\n            "])),(n()(),_._16(46,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.toggleDelete()&&l}return l},Hn.b,Hn.a)),_._15(47,770048,null,0,Yn.a,[zn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),_._32(131072,nn.a,[en.a,_.i]),(n()(),_._40(-1,0,["\n            "])),(n()(),_._16(50,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.deleteConversation(t)&&l}return l},Hn.b,Hn.a)),_._15(51,770048,null,0,Yn.a,[zn.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),_._32(131072,nn.a,[en.a,_.i]),(n()(),_._40(-1,0,["\n        "])),(n()(),_._40(-1,0,["\n    "])),(n()(),_._40(-1,null,["\n"])),(n()(),_._40(-1,null,["\n"])),(n()(),_._16(57,0,null,null,20,"ion-content",[["class","has-footer"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,qn.b,qn.a)),_._15(58,4374528,[[1,4]],0,Cn.a,[Q.a,an.a,Jn.a,_.p,_.K,Kn.a,Qn.a,_.D,[2,xn.a],[2,Mn.a]],null,null),(n()(),_._40(-1,1,["\n    "])),(n()(),_._16(60,0,null,1,16,"core-loading",[],null,null,null,Zn.b,Zn.a)),_._15(61,638976,null,0,ne.a,[en.a,_.p,y.a,E.a],{hideUntil:[0,"hideUntil"]},null),(n()(),_._40(-1,0,["\n        "])),(n()(),_._40(-1,0,["\n        "])),(n()(),_._16(64,0,null,0,1,"core-infinite-loading",[["position","top"]],null,[[null,"action"]],function(n,e,t){var l=!0;if("action"===e){l=!1!==n.component.loadPrevious(t)&&l}return l},ee.b,ee.a)),_._15(65,49152,null,0,te.a,[],{enabled:[0,"enabled"],error:[1,"error"],position:[2,"position"]},{action:"action"}),(n()(),_._40(-1,0,["\n        "])),(n()(),_._16(67,0,null,0,5,"ion-list",[["class","addon-messages-discussion-container safe-area-page"]],[[1,"aria-live",0]],null,null,null,null)),_._15(68,16384,null,0,le.a,[Q.a,_.p,_.K,an.a,se.l,Jn.a],null,null),(n()(),_._40(-1,null,["\n            "])),(n()(),_._11(16777216,null,null,1,null,g)),_._15(71,802816,null,0,gn.j,[_.W,_.T,_.v],{ngForOf:[0,"ngForOf"]},null),(n()(),_._40(-1,null,["\n        "])),(n()(),_._40(-1,0,["\n        "])),(n()(),_._11(16777216,null,0,1,null,f)),_._15(75,16384,null,0,gn.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(n()(),_._40(-1,0,["\n    "])),(n()(),_._40(-1,1,["\n"])),(n()(),_._40(-1,null,["\n"])),(n()(),_._11(16777216,null,null,1,null,h)),_._15(80,16384,null,0,gn.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(n()(),_._40(-1,null,["\n"]))],function(n,e){var t=e.component;n(e,7,0);n(e,13,0,t.conversationImage);n(e,16,0,t.title);n(e,19,0,t.conversation&&t.conversation.isfavourite),n(e,28,0),n(e,32,0);n(e,35,0,_._41(e,35,0,_._29(e,36).transform("addon.messages.info")),"information-circle",1e3,!t.showInfo||t.isGroup);n(e,39,0,_._41(e,39,0,_._29(e,40).transform("addon.messages.groupinfo")),"information-circle",1e3,!t.showInfo||!t.isGroup);n(e,43,0,_._41(e,43,0,_._29(e,44).transform(t.conversation&&t.conversation.isfavourite?"addon.messages.removefromfavourites":"addon.messages.addtofavourites")),t.favouriteIcon,!1,800,!t.groupMessagingEnabled||!t.conversation);n(e,47,0,_._41(e,47,0,_._29(e,48).transform("addon.messages.showdeletemessages")),"trash",400,!t.canDelete);n(e,51,0,_._41(e,51,0,_._29(e,52).transform("addon.messages.deleteconversation")),t.deleteIcon,!1,200,!t.groupMessagingEnabled||!t.conversationId||t.isGroup);n(e,61,0,t.loaded);n(e,65,0,t.canLoadMore,t.loadMoreError,"top");n(e,71,0,t.messages);n(e,75,0,!t.messages||t.messages.length<=0);n(e,80,0,t.loaded&&(!t.conversationId||t.conversation))},function(n,e){var t=e.component;n(e,5,0,_._29(e,6)._hidden,_._29(e,6)._sbPadding);n(e,57,0,_._29(e,58).statusbarPadding,_._29(e,58)._hasRefresher);n(e,67,0,t.polite)})}Object.defineProperty(e,"__esModule",{value:!0});var _=t(1),p=t(0),v=(t(9),t(4)),y=t(13),b=t(2),I=t(173),M=t(344),C=t(452),w=t(44),P=t(5),E=t(3),D=t(6),x=t(11),k=(t(1425),t(34)),U=t(198),T=t(14),S=function(){function n(n,e,t,l,s,o,a,i,r,u,c,d,g,f,h){var m=this;this.eventsProvider=n,this.userProvider=l,this.navCtrl=s,this.messagesSync=o,this.domUtils=a,this.messagesProvider=i,this.utils=u,this.appProvider=c,this.translate=d,this.svComponent=g,this.messagesOffline=f,this.modalCtrl=h,this.unreadMessageFrom=0,this.messagesBeingSent=0,this.pagesLoaded=1,this.lastMessage={text:"",timecreated:0},this.keepMessageMap={},this.oldContentHeight=0,this.scrollBottom=!0,this.viewDestroyed=!1,this.loaded=!1,this.showKeyboard=!1,this.canLoadMore=!1,this.loadMoreError=!1,this.messages=[],this.showDelete=!1,this.canDelete=!1,this.isGroup=!1,this.members={},this.favouriteIcon="fa-star",this.deleteIcon="trash",this.siteId=e.getCurrentSiteId(),this.currentUserId=e.getCurrentSiteUserId(),this.groupMessagingEnabled=this.messagesProvider.isGroupMessagingEnabled(),this.logger=r.getInstance("AddonMessagesDiscussionPage"),this.conversationId=t.get("conversationId"),this.userId=t.get("userId"),this.showKeyboard=t.get("showKeyboard"),this.syncObserver=n.on(C.a.AUTO_SYNCED,function(n){(n.userId&&n.userId==m.userId||n.conversationId&&n.conversationId==m.conversationId)&&(m.fetchMessages(),n.warnings&&n.warnings[0]&&m.domUtils.showErrorModal(n.warnings[0]))},this.siteId)}return n.prototype.addMessage=function(n,e){void 0===e&&(e=!0),n.hash=U.Md5.hashAsciiStr(n.text||"")+"#"+n.timecreated+"#"+n.useridfrom,void 0===this.keepMessageMap[n.hash]&&this.messages.push(n),this.keepMessageMap[n.hash]=e},n.prototype.removeMessage=function(n){if(this.keepMessageMap[n])this.keepMessageMap[n]=!1;else{delete this.keepMessageMap[n];var e=this.messages.findIndex(function(e){return e.hash==n});e>=0&&this.messages.splice(e,1)}},n.prototype.ionViewDidLoad=function(){var n=this,e=this.navCtrl.getPrevious()&&this.navCtrl.getPrevious().component.name;this.showInfo=!e||"CoreUserProfilePage"!==e,!this.groupMessagingEnabled&&this.userId&&this.userProvider.getProfile(this.userId,void 0,!0).then(function(e){n.title||(n.title=e.fullname),n.conversationImage=e.profileimageurl}),this.messagesSync.syncDiscussion(this.conversationId,this.userId).catch(function(){}).then(function(e){return e&&e[0]&&n.domUtils.showErrorModal(e[0]),n.groupMessagingEnabled?n.getConversation(n.conversationId,n.userId).then(function(e){if(e)return n.fetchMessages()}):n.fetchMessages().then(function(){!n.title&&n.messages.length&&(n.title=n.messages[0].useridto!=n.currentUserId?n.messages[0].usertofullname||"":n.messages[0].userfromfullname||"")})}).catch(function(e){n.domUtils.showErrorModalDefault(e,"addon.messages.errorwhileretrievingmessages",!0)}).finally(function(){n.checkCanDelete(),n.resizeContent(),n.loaded=!0,n.setPolling()}),this.keyboardObserver=this.eventsProvider.on(y.a.KEYBOARD_CHANGE,function(e){n.content.resize()})},n.prototype.ionViewDidEnter=function(){this.setPolling()},n.prototype.ionViewWillLeave=function(){this.unsetPolling()},n.prototype.fetchMessages=function(){var n=this;return this.loadMoreError=!1,this.messagesBeingSent>0?Promise.reject(null):this.fetching?Promise.reject(null):this.groupMessagingEnabled&&!this.conversationId?Promise.reject(null):(this.logger.debug(this.conversationId?"Polling new messages for conversation '"+this.conversationId+"'":"Polling new messages for discussion with user '"+this.userId+"'"),this.fetching=!0,this.messagesSync.waitForSyncConversation(this.conversationId,this.userId).then(function(){return n.groupMessagingEnabled?n.messagesProvider.invalidateConversationMessages(n.conversationId).catch(function(){}).then(function(){return n.getConversationMessages(n.pagesLoaded)}):n.messagesProvider.invalidateDiscussionCache(n.userId).catch(function(){}).then(function(){return n.getDiscussionMessages(n.pagesLoaded)})}).then(function(e){n.loadMessages(e)}).finally(function(){n.fetching=!1}))},n.prototype.loadMessages=function(n){var e=this;if(!(this.viewDestroyed||(this.scrollBottom=this.domUtils.getScrollHeight(this.content)-this.domUtils.getScrollTop(this.content)===this.domUtils.getContentHeight(this.content),this.messagesBeingSent>0))){n.forEach(function(n){e.addMessage(n)});for(var t in this.keepMessageMap)this.removeMessage(t);this.messagesProvider.sortMessages(this.messages),this.messages.forEach(function(n,t){n.showDate=e.showDate(n,e.messages[t-1]),n.showUserData=e.showUserData(n,e.messages[t-1])}),this.notifyNewMessage(),this.markMessagesAsRead()}},n.prototype.getConversation=function(n,e){var t,l=this;return(n?Promise.resolve(n):this.messagesProvider.getConversationBetweenUsers(e).then(function(n){return t=n,n.id})).then(function(n){return l.messagesProvider.invalidateConversation(n).catch(function(){}).then(function(){return l.messagesProvider.getConversation(n)}).catch(function(n){return t||Promise.reject(n)}).then(function(n){return l.conversation=n,!!n&&(l.conversationId=n.id,l.title=n.name,l.conversationImage=n.imageurl,l.isGroup=n.type==I.a.MESSAGE_CONVERSATION_TYPE_GROUP,l.favouriteIcon=n.isfavourite?"fa-star-o":"fa-star",l.isGroup||(l.userId=n.userid),!0)})},function(n){return l.messagesOffline.getMessages(e).then(function(e){if(e&&e.length)e.forEach(function(n){n.pending=!0,n.text=n.smallmessage}),l.loadMessages(e);else if("errorconversationdoesnotexist"!=n.errorcode)return Promise.reject(n)})})},n.prototype.getConversationMessages=function(n,e){var t=this;void 0===e&&(e=0);return this.messagesProvider.getConversationMessages(this.conversationId,e>0,e).then(function(l){return n--,l.members&&l.members.forEach(function(n){t.members[n.id]=n}),n>0&&l.canLoadMore?(e+=I.a.LIMIT_MESSAGES,t.getConversationMessages(n,e).then(function(n){return l.messages.concat(n)})):(t.canLoadMore=l.canLoadMore,l.messages)})},n.prototype.getDiscussionMessages=function(n,e,t,l,s){var o=this;void 0===e&&(e=0),void 0===t&&(t=0),void 0===l&&(l=0),void 0===s&&(s=0);return this.messagesProvider.getDiscussion(this.userId,e>0||t>0||l>0||s>0,e,t,l,s).then(function(a){return--n>0&&a.canLoadMore?(a.messages.forEach(function(n){n.pending||(n.useridfrom==o.userId?n.read?t++:e++:n.read?s++:l++)}),o.getDiscussionMessages(n,e,t,l,s).then(function(n){return a.messages.concat(n)})):(o.canLoadMore=a.canLoadMore,a.messages)})},n.prototype.markMessagesAsRead=function(){var n=this,e=!1,t=[];if(this.messagesProvider.isMarkAllMessagesReadEnabled()){var l=!1;if(this.groupMessagingEnabled)l=this.conversation&&this.conversation.unreadcount>0&&this.conversationId>0;else for(var s in this.messages){var o=this.messages[s];if(o.useridfrom!=this.currentUserId&&0==o.read){l=!0;break}}if(l){this.setUnreadLabelPosition();var a=void 0;a=this.groupMessagingEnabled?this.messagesProvider.markAllConversationMessagesRead(this.conversationId):this.messagesProvider.markAllMessagesRead(this.userId).then(function(){n.messages.forEach(function(n){n.read=1})}),t.push(a.then(function(){e=!0}))}}else this.setUnreadLabelPosition(),this.messages.forEach(function(l){l.useridfrom!=n.currentUserId&&0==l.read&&t.push(n.messagesProvider.markMessageRead(l.id).then(function(){e=!0,l.read=1}))});Promise.all(t).finally(function(){e&&n.eventsProvider.trigger(I.a.READ_CHANGED_EVENT,{conversationId:n.conversationId,userId:n.userId},n.siteId)})},n.prototype.notifyNewMessage=function(){var n=this.messages[this.messages.length-1],e=!1;if(n?n.text===this.lastMessage.text&&n.timecreated===this.lastMessage.timecreated||(this.lastMessage={text:n.text,timecreated:n.timecreated},e=!0):(this.lastMessage={text:"",timecreated:0},e=!0),e){this.eventsProvider.trigger(I.a.NEW_MESSAGE_EVENT,{conversationId:this.conversationId,userId:this.userId,message:this.lastMessage.text,timecreated:this.lastMessage.timecreated},this.siteId);this.canDelete!=(n&&n.id&&1==this.messages.length||this.messages.length>1)&&this.checkCanDelete()}},n.prototype.setUnreadLabelPosition=function(){if(0==this.unreadMessageFrom){if(this.groupMessagingEnabled){if(this.conversation&&this.conversation.unreadcount>0&&this.messages)for(var n=0,e=this.messages.length-1;e>=0;e--){if(!(s=this.messages[e]).pending&&s.useridfrom!=this.currentUserId&&++n==this.conversation.unreadcount){this.unreadMessageFrom=parseInt(s.id,10);break}}}else{var t=!1;for(var l in this.messages){var s;if((s=this.messages[l]).useridfrom!=this.currentUserId){if(0==s.read&&t){this.unreadMessageFrom=parseInt(s.id,10);break}t=0!=s.read}}}0==this.unreadMessageFrom&&(this.unreadMessageFrom=-1)}},n.prototype.checkCanDelete=function(){var n=this.messages[0];this.canDelete=n&&!n.sending},n.prototype.hideUnreadLabel=function(){this.unreadMessageFrom>0&&(this.unreadMessageFrom=-1)},n.prototype.waitForFetch=function(){var n=this;if(!this.fetching)return Promise.resolve();var e=this.utils.promiseDefer();return setTimeout(function(){return n.waitForFetch().finally(function(){e.resolve()})},400),e.promise},n.prototype.setPolling=function(){var n=this;this.groupMessagingEnabled&&!this.conversationId||this.polling||(this.polling=setInterval(function(){n.fetchMessages().catch(function(){})},I.a.POLL_INTERVAL))},n.prototype.unsetPolling=function(){this.polling&&(this.logger.debug("Cancelling polling for conversation with user '"+this.userId+"'"),clearInterval(this.polling),this.polling=void 0)},n.prototype.copyMessage=function(n){this.utils.copyToClipboard(n.smallmessage||n.text||"")},n.prototype.deleteMessage=function(n,e){var t=this;this.domUtils.showConfirm(this.translate.instant(n.pending?"core.areyousure":"addon.messages.deletemessageconfirmation")).then(function(){var l=t.domUtils.showModalLoading("core.deleting",!0);return t.messagesProvider.deleteMessage(n).then(function(){t.messages.splice(e,1),t.removeMessage(n.hash),t.notifyNewMessage(),t.fetchMessages()}).finally(function(){l.dismiss()})}).catch(function(n){t.domUtils.showErrorModalDefault(n,"addon.messages.errordeletemessage",!0)})},n.prototype.loadPrevious=function(n){var e=this;return this.waitForFetch().finally(function(){e.pagesLoaded++,e.fetchMessages().catch(function(n){e.loadMoreError=!0,e.pagesLoaded--,e.domUtils.showErrorModalDefault(n,"addon.messages.errorwhileretrievingmessages",!0)}).finally(function(){n&&n()})})},n.prototype.resizeContent=function(){var n=this,e=this.content.getContentDimensions().scrollTop;this.content.resize(),setTimeout(function(){!n.viewDestroyed&&n.content&&n.domUtils.getContentHeight(n.content)!=n.oldContentHeight&&(e||(e=n.content.getContentDimensions().scrollTop),e+=n.oldContentHeight-n.domUtils.getContentHeight(n.content),n.oldContentHeight=n.domUtils.getContentHeight(n.content),n.domUtils.scrollTo(n.content,0,e,0))})},n.prototype.scrollToBottom=function(){var n=this;this.scrollBottom&&(setTimeout(function(){n.viewDestroyed||n.domUtils.scrollToBottom(n.content,0)}),this.scrollBottom=!1)},n.prototype.sendMessage=function(n){var e,t=this;this.hideUnreadLabel(),this.showDelete=!1,this.scrollBottom=!0,(e={pending:!0,sending:!0,useridfrom:this.currentUserId,smallmessage:n,text:n,timecreated:(new Date).getTime()}).showDate=this.showDate(e,this.messages[this.messages.length-1]),this.addMessage(e,!1),this.messagesBeingSent++,this.waitForFetch().finally(function(){(t.conversationId?t.messagesProvider.sendMessageToConversation(t.conversation,n):t.messagesProvider.sendMessage(t.userId,n)).then(function(n){t.messagesBeingSent--,(n.sent?!t.conversationId&&n.message&&n.message.conversationid?t.getConversation(n.message.conversationid,t.userId).then(function(){return t.fetchMessages()}).finally(function(){t.setPolling()}):t.fetchMessages():Promise.reject(null)).catch(function(){e.sending=!1,n.sent?e.pending=!1:n.message&&(e.timecreated=n.message.timecreated),t.notifyNewMessage()})}).catch(function(n){t.messagesBeingSent--,t.appProvider.closeKeyboard(),t.domUtils.showErrorModalDefault(n,"addon.messages.messagenotsent",!0),t.removeMessage(e.hash)})})},n.prototype.showDate=function(n,e){return!e||!T(n.timecreated).isSame(e.timecreated,"day")},n.prototype.showUserData=function(n,e){return this.isGroup&&n.useridfrom!=this.currentUserId&&this.members[n.useridfrom]&&(!e||e.useridfrom!=n.useridfrom||n.showDate)},n.prototype.toggleDelete=function(){this.showDelete=!this.showDelete},n.prototype.viewInfo=function(){var n=this;if(this.isGroup){var e=this.modalCtrl.create("AddonMessagesConversationInfoPage",{conversationId:this.conversationId});e.present(),e.onDidDismiss(function(e){void 0!==e&&(n.svComponent?n.eventsProvider.trigger(I.a.OPEN_CONVERSATION_EVENT,{userId:e},n.siteId):n.navCtrl.push("AddonMessagesDiscussionPage",{userId:e}))})}else{(this.svComponent?this.svComponent.getMasterNav():this.navCtrl).push("CoreUserProfilePage",{userId:this.userId})}},n.prototype.changeFavourite=function(n){var e=this;this.favouriteIcon="spinner",this.messagesProvider.setFavouriteConversation(this.conversation.id,!this.conversation.isfavourite).then(function(){e.conversation.isfavourite=!e.conversation.isfavourite,e.messagesProvider.getConversation(e.conversation.id),e.eventsProvider.trigger(I.a.UPDATE_CONVERSATION_LIST_EVENT,{conversationId:e.conversation.id,action:"favourite",value:e.conversation.isfavourite},e.siteId)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Error changing favourite state.")}).finally(function(){e.favouriteIcon=e.conversation.isfavourite?"fa-star-o":"fa-star",n&&n()})},n.prototype.deleteConversation=function(n){var e=this;this.domUtils.showConfirm(this.translate.instant("addon.messages.deleteallconfirm")).then(function(){return e.deleteIcon="spinner",e.messagesProvider.deleteConversation(e.conversation.id).then(function(){e.eventsProvider.trigger(I.a.UPDATE_CONVERSATION_LIST_EVENT,{conversationId:e.conversation.id,action:"delete"},e.siteId),e.conversationId=void 0,e.conversation=void 0,e.messages=[]}).finally(function(){e.deleteIcon="trash",n&&n()})}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Error deleting conversation.")})},n.prototype.ngOnDestroy=function(){this.unsetPolling(),this.syncObserver&&this.syncObserver.off(),this.keyboardObserver&&this.keyboardObserver.off(),this.viewDestroyed=!0},n=Object(p.__decorate)([Object(p.__param)(12,Object(_.E)())],n)}(),A=t(28),L=t(29),O=t(108),R=function(){return function(){}}(),K=t(1344),F=t(1345),N=t(1346),$=t(1347),B=t(1348),X=t(1349),G=t(1350),V=t(1351),z=t(1352),W=t(1355),j=t(1356),H=t(1357),Y=t(134),q=t(121),J=t(706),Q=t(7),Z=t(62),nn=t(25),en=t(18),tn=t(46),ln=t(185),sn=t(227),on=t(17),an=t(15),rn=t(26),un=t(226),cn=t(45),dn=t(42),gn=t(8),fn=t(30),hn=t(1422),mn=t(21),_n=t(20),pn=t(27),vn=t(32),yn=t(40),bn=t(10),In=t(19),Mn=t(22),Cn=t(24),wn=t(37),Pn=t(120),En=t(111),Dn=t(681),xn=t(36),kn=t(1957),Un=t(247),Tn=t(1960),Sn=t(1369),An=t(224),Ln=t(434),On=t(1353),Rn=t(200),Kn=t(33),Fn=t(662),Nn=t(1354),$n=t(335),Bn=t(435),Xn=t(85),Gn=t(78),Vn=t(88),zn=t(73),Wn=t(63),jn=t(72),Hn=t(89),Yn=t(80),qn=t(184),Jn=t(31),Qn=t(109),Zn=t(49),ne=t(48),ee=t(440),te=t(277),le=t(77),se=t(38),oe=t(61),ae=t(204),ie=_._14({encapsulation:2,styles:[],data:{animation:[{type:7,name:"coreSlideInOut",definitions:[{type:1,expr:"void => fromLeft",animation:[{type:6,styles:{transform:"translateX(0)",opacity:1},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateX(-100%)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(5%)",offset:.7},offset:null},{type:6,styles:{opacity:1,transform:"translateX(0)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"fromLeft => void",animation:[{type:6,styles:{transform:"translateX(-100%)",opacity:0},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:1,transform:"translateX(0)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(5%)",offset:.3},offset:null},{type:6,styles:{opacity:0,transform:"translateX(-100%)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"void => fromRight",animation:[{type:6,styles:{transform:"translateX(0)",opacity:1},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateX(100%)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(-5%)",offset:.7},offset:null},{type:6,styles:{opacity:1,transform:"translateX(0)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"fromRight => void",animation:[{type:6,styles:{transform:"translateX(-100%)",opacity:0},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:1,transform:"translateX(0)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(-5%)",offset:.3},offset:null},{type:6,styles:{opacity:0,transform:"translateX(100%)",offset:1},offset:null}]},timings:300}],options:null}],options:{}}]}}),re=_._12("page-addon-messages-discussion",S,function(n){return _._42(0,[(n()(),_._16(0,0,null,null,1,"page-addon-messages-discussion",[],null,null,null,m,ie)),_._15(1,180224,null,0,S,[y.a,b.a,oe.a,w.a,Mn.a,C.a,P.a,I.a,D.a,E.a,x.a,en.a,[2,k.a],M.a,ae.a],null,null)],null,null)},{},{},[]),ue=t(23),ce=t(331),de=t(332),ge=t(334),fe=t(333),he=t(433),me=t(661),_e=t(248);t.d(e,"AddonMessagesDiscussionPageModuleNgFactory",function(){return pe});var pe=_._13(R,[],function(n){return _._25([_._26(512,_.n,_._6,[[8,[K.a,F.a,N.a,$.a,B.a,X.a,G.a,V.a,z.a,W.a,j.a,H.a,re]],[3,_.n],_.B]),_._26(4608,gn.m,gn.l,[_.x,[2,gn.v]]),_._26(4608,ue.x,ue.x,[]),_._26(4608,ue.d,ue.d,[]),_._26(4608,ce.b,ce.a,[]),_._26(4608,de.a,de.b,[]),_._26(4608,ge.b,ge.a,[]),_._26(4608,fe.b,fe.a,[]),_._26(4608,en.a,en.a,[he.a,ce.b,de.a,ge.b,fe.b,en.b,en.c]),_._26(512,gn.b,gn.b,[]),_._26(512,ue.v,ue.v,[]),_._26(512,ue.i,ue.i,[]),_._26(512,ue.s,ue.s,[]),_._26(512,me.a,me.a,[]),_._26(512,v.a,v.a,[]),_._26(512,L.a,L.a,[]),_._26(512,O.a,O.a,[]),_._26(512,A.a,A.a,[]),_._26(512,me.b,me.b,[]),_._26(512,R,R,[]),_._26(256,en.c,void 0,[]),_._26(256,en.b,void 0,[]),_._26(256,_e.a,S,[])])})},1957:function(n,e,t){"use strict";function l(n){return s._42(2,[(n()(),s._16(0,0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),s._15(1,278528,null,0,o.i,[s.v,s.w,s.p,s.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),s._28(null,0),s._28(null,1),s._28(null,2),(n()(),s._16(5,0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),s._15(6,278528,null,0,o.i,[s.v,s.w,s.p,s.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),s._28(null,3)],function(n,e){var t=e.component;n(e,1,0,"toolbar-background","toolbar-background-"+t._mode);n(e,6,0,"toolbar-content","toolbar-content-"+t._mode)},null)}t.d(e,"a",function(){return a}),e.b=l;var s=t(1),o=t(8),a=(t(7),s._14({encapsulation:2,styles:[],data:{}}))},1960:function(n,e,t){"use strict";function l(n){return s._42(0,[(n()(),s._16(0,0,null,null,28,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,e,t){var l=!0;if("submit"===e){l=!1!==s._29(n,2).onSubmit(t)&&l}if("reset"===e){l=!1!==s._29(n,2).onReset()&&l}return l},null,null)),s._15(1,16384,null,0,o.w,[],null,null),s._15(2,4210688,null,0,o.p,[[8,null],[8,null]],null,null),s._35(2048,null,o.b,null,[o.p]),s._15(4,16384,null,0,o.o,[o.b],null,null),(n()(),s._40(-1,null,["\n    "])),(n()(),s._16(6,0,null,null,7,"textarea",[["class","core-send-message-input"],["core-auto-rows",""],["name","message"],["rows","1"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"onResize"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(n,e,t){var l=!0,o=n.component;if("input"===e){l=!1!==s._29(n,7)._handleInput(t.target.value)&&l}if("blur"===e){l=!1!==s._29(n,7).onTouched()&&l}if("compositionstart"===e){l=!1!==s._29(n,7)._compositionStart()&&l}if("compositionend"===e){l=!1!==s._29(n,7)._compositionEnd(t.target.value)&&l}if("input"===e){l=!1!==s._29(n,13).onInput()&&l}if("change"===e){l=!1!==s._29(n,13).onChange()&&l}if("ngModelChange"===e){l=!1!==(o.message=t)&&l}if("onResize"===e){l=!1!==o.textareaResized()&&l}return l},null,null)),s._15(7,16384,null,0,o.c,[s.L,s.p,[2,o.a]],null,null),s._35(1024,null,o.l,function(n){return[n]},[o.c]),s._15(9,671744,null,0,o.q,[[2,o.b],[8,null],[8,null],[2,o.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),s._35(2048,null,o.m,null,[o.q]),s._15(11,16384,null,0,o.n,[o.m],null,null),s._15(12,81920,null,0,a.a,[s.p,i.a,r.a,[2,u.a]],{coreAutoFocus:[0,"coreAutoFocus"]},null),s._15(13,4210688,null,0,c.a,[s.p],null,{onResize:"onResize"}),(n()(),s._40(-1,null,["\n    "])),(n()(),s._16(15,0,null,null,12,"ion-buttons",[["end",""]],null,null,null,null,null)),s._15(16,16384,null,1,d.a,[g.a,s.p,s.K,[2,f.a],[2,h.a]],null,null),s._37(603979776,1,{_buttons:1}),(n()(),s._40(-1,null,["\n        "])),(n()(),s._16(19,0,null,null,7,"button",[["clear","true"],["icon-only",""],["ion-button",""],["type","submit"]],[[8,"disabled",0],[1,"aria-label",0]],[[null,"onClick"]],function(n,e,t){var l=!0;if("onClick"===e){l=!1!==n.component.submitForm(t)&&l}return l},m.b,m.a)),s._15(20,1097728,[[1,4]],0,_.a,[[8,""],g.a,s.p,s.K],{clear:[0,"clear"]},null),s._15(21,81920,null,0,p.a,[s.p],null,{onClick:"onClick"}),s._32(131072,v.a,[y.a,s.i]),(n()(),s._40(-1,0,["\n            "])),(n()(),s._16(24,0,null,0,1,"ion-icon",[["color","dark"],["name","send"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._15(25,147456,null,0,b.a,[g.a,s.p,s.K],{color:[0,"color"],name:[1,"name"]},null),(n()(),s._40(-1,0,["\n        "])),(n()(),s._40(-1,null,["\n    "])),(n()(),s._40(-1,null,["\n"])),(n()(),s._40(-1,null,["\n"]))],function(n,e){var t=e.component;n(e,9,0,"message",t.message);n(e,12,0,t.showKeyboard);n(e,20,0,"true"),n(e,21,0);n(e,25,0,"dark","send")},function(n,e){var t=e.component;n(e,0,0,s._29(e,4).ngClassUntouched,s._29(e,4).ngClassTouched,s._29(e,4).ngClassPristine,s._29(e,4).ngClassDirty,s._29(e,4).ngClassValid,s._29(e,4).ngClassInvalid,s._29(e,4).ngClassPending);n(e,6,0,t.placeholder,s._29(e,11).ngClassUntouched,s._29(e,11).ngClassTouched,s._29(e,11).ngClassPristine,s._29(e,11).ngClassDirty,s._29(e,11).ngClassValid,s._29(e,11).ngClassInvalid,s._29(e,11).ngClassPending);n(e,19,0,!t.message,s._41(e,19,1,s._29(e,22).transform("core.send")));n(e,24,0,s._29(e,25)._hidden)})}t.d(e,"a",function(){return I}),e.b=l;var s=t(1),o=t(23),a=t(338),i=t(5),r=t(3),u=t(22),c=t(347),d=t(435),g=t(7),f=t(247),h=t(200),m=t(45),_=t(42),p=t(350),v=t(25),y=t(18),b=t(46),I=(t(10),s._14({encapsulation:2,styles:[],data:{}}))}});